  [4;36;1mSQL (0.3ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.2ms)[0m   [0mselect sqlite_version(*)[0m
  [4;36;1mSQL (2.4ms)[0m   [0;1mCREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) [0m
  [4;35;1mSQL (2.2ms)[0m   [0mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT version FROM schema_migrations[0m
Migrating to CreateInvoiceTrails (20090907094919)
  [4;36;1mSQL (0.8ms)[0m   [0;1mCREATE TABLE "invoice_trails" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "admission_date" date, "external_code" varchar(255), "last_name" varchar(255), "first_name" varchar(255), "gross_amount" decimal, "payed_amount" boolean, "discount" decimal, "payed" boolean, "payment_date" date, "invoice_number" integer, "notes" text, "created_at" datetime, "updated_at" datetime) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20090907094919')[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.1ms)[0m   [0mPRAGMA index_list("invoice_trails")[0m


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 11:50:10) [GET]
  [4;36;1mInvoiceTrail Load (0.4ms)[0m   [0;1mSELECT * FROM "invoice_trails" [0m
Rendering invoice_trails/index

ActionView::TemplateError (undefined method `title' for #<ActionView::Base:0x18d8708>) on line #1 of app/views/invoice_trails/index.html.haml:
1: - title "Invoice Trails"
2: 
3: %table
4:   %tr

    app/views/invoice_trails/index.html.haml:1:in `_run_haml_app47views47invoice_trails47index46html46haml'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/sass/plugin/rails.rb:19:in `process'

Rendered rescues/_trace (98.9ms)
Rendered rescues/_request_and_response (1.5ms)
Rendering rescues/layout (internal_server_error)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 11:52:16) [GET]
  [4;36;1mInvoiceTrail Load (0.4ms)[0m   [0;1mSELECT * FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
Completed in 23ms (View: 19, DB: 0) | 200 OK [http://localhost/]


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 11:52:52) [GET]
  [4;35;1mInvoiceTrail Load (0.3ms)[0m   [0mSELECT * FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
Completed in 5ms (View: 1, DB: 0) | 200 OK [http://localhost/]


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 11:52:52) [GET]
  [4;36;1mInvoiceTrail Load (0.3ms)[0m   [0;1mSELECT * FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
Completed in 5ms (View: 1, DB: 0) | 200 OK [http://localhost/]


Processing InvoiceTrailsController#new (for 127.0.0.1 at 2009-09-07 11:52:59) [GET]
Rendering template within layouts/application
Rendering invoice_trails/new
Rendered invoice_trails/_form (298.5ms)
Completed in 313ms (View: 308, DB: 0) | 200 OK [http://localhost/invoice_trails/new]


Processing InvoiceTrailsController#new (for 127.0.0.1 at 2009-09-07 11:55:50) [GET]
Rendering template within layouts/application
Rendering invoice_trails/new
Rendered invoice_trails/_form (136.8ms)
Completed in 243ms (View: 237, DB: 0) | 200 OK [http://localhost/invoice_trails/new]
  [4;36;1mSQL (0.4ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT version FROM schema_migrations[0m
Migrating to CreateInvoiceTrails (20090907100024)
  [4;36;1mSQL (0.1ms)[0m   [0;1mselect sqlite_version(*)[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSQLite3::SQLException: table "invoice_trails" already exists: CREATE TABLE "invoice_trails" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "admission_date" date, "external_code" varchar(255), "last_name" varchar(255), "first_name" varchar(255), "gross_amount" decimal, "payed_amount" boolean, "discount" decimal, "payed" boolean, "payment_date" date, "invoice_number" integer, "notes" text, "created_at" datetime, "updated_at" datetime) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.1ms)[0m   [0mselect sqlite_version(*)[0m
  [4;36;1mSQL (2.4ms)[0m   [0;1mCREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) [0m
  [4;35;1mSQL (1.6ms)[0m   [0mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT version FROM schema_migrations[0m
Migrating to CreateInvoiceTrails (20090907100024)
  [4;36;1mSQL (0.5ms)[0m   [0;1mCREATE TABLE "invoice_trails" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "admission_date" date, "external_code" varchar(255), "last_name" varchar(255), "first_name" varchar(255), "gross_amount" decimal, "payed_amount" boolean, "discount" decimal, "payed" boolean, "payment_date" date, "invoice_number" integer, "notes" text, "created_at" datetime, "updated_at" datetime) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20090907100024')[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.0ms)[0m   [0mPRAGMA index_list("invoice_trails")[0m


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:03:00) [GET]
  [4;36;1mInvoiceTrail Load (0.4ms)[0m   [0;1mSELECT * FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
Completed in 124ms (View: 119, DB: 0) | 200 OK [http://bios-invoice-manager.local/]


Processing InvoiceTrailsController#new (for 127.0.0.1 at 2009-09-07 12:03:02) [GET]
Rendering template within layouts/application
Rendering invoice_trails/new
Rendered invoice_trails/_form (76.7ms)
Completed in 91ms (View: 86, DB: 0) | 200 OK [http://bios-invoice-manager.local/invoice_trails/new]


Processing InvoiceTrailsController#new (for 127.0.0.1 at 2009-09-07 12:03:49) [GET]
Rendering template within layouts/application
Rendering invoice_trails/new
Rendered invoice_trails/_form (30.0ms)
Completed in 41ms (View: 33, DB: 0) | 200 OK [http://bios-invoice-manager.local/invoice_trails/new]


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:38:09) [GET]
  [4;36;1mInvoiceTrail Load (0.2ms)[0m   [0;1mSELECT * FROM "invoice_trails" [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index

ActionView::TemplateError (You don't need to use "- end" in Haml. Use indentation instead:
- if foo?
  %strong Foo!
- else
  Not foo.) on line #40 of app/views/invoice_trails/index.html.haml:
37:     = f.collection_select :technician_id_is, Technician.all, :id, :name, { :include_blank => true }
38: %p.button
39:   = f.submit 'Filter'
40: - end
41: 
42: 
43: 

    app/views/invoice_trails/index.html.haml:40
    haml (2.2.3) lib/haml/precompiler.rb:219:in `process_line'
    haml (2.2.3) lib/haml/precompiler.rb:168:in `precompile'
    haml (2.2.3) lib/haml/engine.rb:112:in `initialize'
    haml (2.2.3) lib/haml/template/plugin.rb:21:in `new'
    haml (2.2.3) lib/haml/template/plugin.rb:21:in `compile'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/sass/plugin/rails.rb:19:in `process'
    passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
    passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendered rescues/_trace (167.0ms)
Rendered rescues/_request_and_response (1.4ms)
Rendering rescues/layout (internal_server_error)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:38:25) [GET]
  [4;36;1mInvoiceTrail Load (0.1ms)[0m   [0;1mSELECT * FROM "invoice_trails" [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
ERROR: compiling _run_haml_app47views47invoice_trails47index46html46haml RAISED compile error
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:73: syntax error, unexpected kENSURE, expecting kEND
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:75: syntax error, unexpected $end, expecting kEND
Function body:           def _run_haml_app47views47invoice_trails47index46html46haml(local_assigns)
            old_output_buffer = output_buffer;;extend Haml::Helpers;_hamlout = @haml_buffer = Haml::Buffer.new(@haml_buffer, {:attr_wrapper=>"'", :format=>:xhtml, :preserve=>["textarea", "pre"], :autoclose=>["meta", "img", "link", "br", "hr", "input", "area", "param", "col", "base"], :ugly=>false, :encoding=>nil});_erbout = _hamlout.buffer;__in_erb_template = true;; title "Invoice Trails (#{@invoice_trails_count})";

 form_for @search do |f|;
































_hamlout.push_text("<fieldset>\n  <legend>\n    Search Criteria\n    <!-- \n    -->\n    <!-- = f.label :service_type_is,  'Type:' -->\n    <!-- \n    -->\n    <!-- \n    -->\n  </legend>\n  <p>\n    #{_hamlout.adjust_tabs(2); haml_temp =  f.label :full_name_contains, 'Full Name:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :full_name_contains, :size => 30
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;\n    #{haml_temp =  f.label :payed, 'Payment Status:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;\n    #{haml_temp =  f.radio_button :payed, true
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    Payed&nbsp;&nbsp;\n    #{haml_temp =  f.radio_button :payed, false
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    Not Payed&nbsp;&nbsp;\n  </p>\n  <p>\n    #{haml_temp =  f.label :admission_date_after, "Scheduled between:"
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :scheduled_date_at_after, :size => 10, :class => 'date'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.label :scheduled_date_at_before, "and:"
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :scheduled_date_at_before, :size => 10, :class => 'date'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;&nbsp;&nbsp;\n    #{haml_temp =  f.label :note_contains, 'Note contains:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :note_contains, :size => 20
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n  </p>\n  <p>\n    #{haml_temp =  f.label :equipment_id_is, 'Equipment:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.collection_select :equipment_id_is, Equipment.all, :id, :name, { :include_blank => true }
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;&nbsp;\n    #{haml_temp =  f.label :client_id_is, 'Client:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.collection_select :client_id_is, Client.all, :id, :name, { :include_blank => true }
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;&nbsp;\n    #{haml_temp =  f.label :technician_id_is, 'Technician:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.collection_select :technician_id_is, Technician.all, :id, :name, { :include_blank => true }
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n  </p>\n</fieldset>\n<p class='button'>\n  #{_hamlout.adjust_tabs(-1); haml_temp =  f.submit 'Filter'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n</p>\n<table>\n  <tr>\n    <th>Admission date</th>\n    <th>External code</th>\n    <th>Last name</th>\n    <th>First name</th>\n    <th>Gross amount</th>\n    <th>Payed amount</th>\n    <th>Discount</th>\n    <th>Payed</th>\n    <th>Payment date</th>\n    <th>Invoice number</th>\n    <th>Notes</th>\n  </tr>\n", 0, false); for invoice_trail in @invoice_trails;


_hamlout.push_text("  <tr>\n    <td>#{_hamlout.adjust_tabs(2); haml_temp = h invoice_trail.admission_date
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.external_code
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.last_name
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.first_name
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.gross_amount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payed_amount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.discount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payed
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payment_date
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.invoice_number
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.notes
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Show', invoice_trail
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Edit', edit_invoice_trail_path(invoice_trail)
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Destroy', invoice_trail, :confirm => 'Are you sure?', :method => :delete
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n  </tr>\n", -1, false);end;_hamlout.push_text("</table>\n<p>#{haml_temp = link_to "New Invoice Trail", new_invoice_trail_path
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</p>\n", 0, false);@haml_buffer = @haml_buffer.upper;_erbout;
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:75:in `compile!'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/renderable.rb:61:in `compile'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/renderable.rb:28:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/template.rb:199:in `render_template'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:260:in `render_without_haml'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:343:in `_render_with_layout'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:257:in `render_without_haml'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1250:in `render_for_file'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:945:in `render_without_benchmark'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:51:in `render'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:51:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1326:in `default_render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1332:in `perform_action_without_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:617:in `call_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/flash.rb:146:in `perform_action'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:532:in `send'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:532:in `process_without_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/sass/plugin/rails.rb:19:in `process'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:391:in `process'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:386:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/routing/route_set.rb:437:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:87:in `dispatch'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:121:in `_call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:29:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:29:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:9:in `cache'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:28:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/head.rb:9:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/methodoverride.rb:24:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/params_parser.rb:15:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/session/cookie_store.rb:93:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/failsafe.rb:26:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `synchronize'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:114:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/reloader.rb:34:in `run'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:108:in `call'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/utils.rb:176:in `safe_fork'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:149:in `start'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/bin/passenger-spawn-server:50

ActionView::TemplateError (compile error
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:73: syntax error, unexpected kENSURE, expecting kEND
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:75: syntax error, unexpected $end, expecting kEND) on line #73 of app/views/invoice_trails/index.html.haml:
70: 
71: %p= link_to "New Invoice Trail", new_invoice_trail_path

    app/views/invoice_trails/index.html.haml:75:in `compile!'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/sass/plugin/rails.rb:19:in `process'
    passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
    passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendered rescues/_trace (35.8ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:41:48) [GET]
  [4;36;1mInvoiceTrail Load (0.1ms)[0m   [0;1mSELECT * FROM "invoice_trails" [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
ERROR: compiling _run_haml_app47views47invoice_trails47index46html46haml RAISED compile error
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:73: syntax error, unexpected kENSURE, expecting kEND
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:75: syntax error, unexpected $end, expecting kEND
Function body:           def _run_haml_app47views47invoice_trails47index46html46haml(local_assigns)
            old_output_buffer = output_buffer;;extend Haml::Helpers;_hamlout = @haml_buffer = Haml::Buffer.new(@haml_buffer, {:attr_wrapper=>"'", :format=>:xhtml, :preserve=>["textarea", "pre"], :autoclose=>["meta", "img", "link", "br", "hr", "input", "area", "param", "col", "base"], :ugly=>false, :encoding=>nil});_erbout = _hamlout.buffer;__in_erb_template = true;; title "Invoice Trails (#{@invoice_trails_count})";

 form_for @search do |f|;
































_hamlout.push_text("<fieldset>\n  <legend>\n    Search Criteria\n    <!-- \n    -->\n    <!-- = f.label :service_type_is,  'Type:' -->\n    <!-- \n    -->\n    <!-- \n    -->\n  </legend>\n  <p>\n    #{_hamlout.adjust_tabs(2); haml_temp =  f.label :full_name_contains, 'Full Name:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :full_name_contains, :size => 30
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;\n    #{haml_temp =  f.label :payed, 'Payment Status:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;\n    #{haml_temp =  f.radio_button :payed, true
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    Payed&nbsp;&nbsp;\n    #{haml_temp =  f.radio_button :payed, false
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    Not Payed&nbsp;&nbsp;\n  </p>\n  <p>\n    #{haml_temp =  f.label :admission_date_after, "Scheduled between:"
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :scheduled_date_at_after, :size => 10, :class => 'date'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.label :scheduled_date_at_before, "and:"
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :scheduled_date_at_before, :size => 10, :class => 'date'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;&nbsp;&nbsp;\n    #{haml_temp =  f.label :note_contains, 'Note contains:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :note_contains, :size => 20
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n  </p>\n  <p>\n    #{haml_temp =  f.label :equipment_id_is, 'Equipment:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.collection_select :equipment_id_is, Equipment.all, :id, :name, { :include_blank => true }
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;&nbsp;\n    #{haml_temp =  f.label :client_id_is, 'Client:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.collection_select :client_id_is, Client.all, :id, :name, { :include_blank => true }
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;&nbsp;\n    #{haml_temp =  f.label :technician_id_is, 'Technician:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.collection_select :technician_id_is, Technician.all, :id, :name, { :include_blank => true }
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n  </p>\n</fieldset>\n<p class='button'>\n  #{_hamlout.adjust_tabs(-1); haml_temp =  f.submit 'Filter'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n</p>\n<table>\n  <tr>\n    <th>Admission date</th>\n    <th>External code</th>\n    <th>Last name</th>\n    <th>First name</th>\n    <th>Gross amount</th>\n    <th>Payed amount</th>\n    <th>Discount</th>\n    <th>Payed</th>\n    <th>Payment date</th>\n    <th>Invoice number</th>\n    <th>Notes</th>\n  </tr>\n", 0, false); for invoice_trail in @invoice_trails;


_hamlout.push_text("  <tr>\n    <td>#{_hamlout.adjust_tabs(2); haml_temp = h invoice_trail.admission_date
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.external_code
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.last_name
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.first_name
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.gross_amount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payed_amount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.discount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payed
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payment_date
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.invoice_number
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.notes
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Show', invoice_trail
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Edit', edit_invoice_trail_path(invoice_trail)
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Destroy', invoice_trail, :confirm => 'Are you sure?', :method => :delete
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n  </tr>\n", -1, false);end;_hamlout.push_text("</table>\n<p>#{haml_temp = link_to "New Invoice Trail", new_invoice_trail_path
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</p>\n", 0, false);@haml_buffer = @haml_buffer.upper;_erbout;
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:75:in `compile!'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/renderable.rb:61:in `compile'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/renderable.rb:28:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/template.rb:199:in `render_template'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:260:in `render_without_haml'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:343:in `_render_with_layout'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:257:in `render_without_haml'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1250:in `render_for_file'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:945:in `render_without_benchmark'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:51:in `render'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:51:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1326:in `default_render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1332:in `perform_action_without_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:617:in `call_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/flash.rb:146:in `perform_action'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:532:in `send'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:532:in `process_without_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/sass/plugin/rails.rb:19:in `process'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:391:in `process'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:386:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/routing/route_set.rb:437:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:87:in `dispatch'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:121:in `_call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:29:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:29:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:9:in `cache'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:28:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/head.rb:9:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/methodoverride.rb:24:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/params_parser.rb:15:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/session/cookie_store.rb:93:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/failsafe.rb:26:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `synchronize'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:114:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/reloader.rb:34:in `run'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:108:in `call'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/utils.rb:176:in `safe_fork'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:149:in `start'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/bin/passenger-spawn-server:50

ActionView::TemplateError (compile error
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:73: syntax error, unexpected kENSURE, expecting kEND
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:75: syntax error, unexpected $end, expecting kEND) on line #73 of app/views/invoice_trails/index.html.haml:
70: 
71: %p= link_to "New Invoice Trail", new_invoice_trail_path

    app/views/invoice_trails/index.html.haml:75:in `compile!'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/sass/plugin/rails.rb:19:in `process'
    passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
    passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendered rescues/_trace (113.8ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:41:49) [GET]
  [4;36;1mInvoiceTrail Load (0.1ms)[0m   [0;1mSELECT * FROM "invoice_trails" [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
ERROR: compiling _run_haml_app47views47invoice_trails47index46html46haml RAISED compile error
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:73: syntax error, unexpected kENSURE, expecting kEND
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:75: syntax error, unexpected $end, expecting kEND
Function body:           def _run_haml_app47views47invoice_trails47index46html46haml(local_assigns)
            old_output_buffer = output_buffer;;extend Haml::Helpers;_hamlout = @haml_buffer = Haml::Buffer.new(@haml_buffer, {:attr_wrapper=>"'", :format=>:xhtml, :preserve=>["textarea", "pre"], :autoclose=>["meta", "img", "link", "br", "hr", "input", "area", "param", "col", "base"], :ugly=>false, :encoding=>nil});_erbout = _hamlout.buffer;__in_erb_template = true;; title "Invoice Trails (#{@invoice_trails_count})";

 form_for @search do |f|;
































_hamlout.push_text("<fieldset>\n  <legend>\n    Search Criteria\n    <!-- \n    -->\n    <!-- = f.label :service_type_is,  'Type:' -->\n    <!-- \n    -->\n    <!-- \n    -->\n  </legend>\n  <p>\n    #{_hamlout.adjust_tabs(2); haml_temp =  f.label :full_name_contains, 'Full Name:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :full_name_contains, :size => 30
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;\n    #{haml_temp =  f.label :payed, 'Payment Status:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;\n    #{haml_temp =  f.radio_button :payed, true
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    Payed&nbsp;&nbsp;\n    #{haml_temp =  f.radio_button :payed, false
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    Not Payed&nbsp;&nbsp;\n  </p>\n  <p>\n    #{haml_temp =  f.label :admission_date_after, "Scheduled between:"
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :scheduled_date_at_after, :size => 10, :class => 'date'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.label :scheduled_date_at_before, "and:"
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :scheduled_date_at_before, :size => 10, :class => 'date'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;&nbsp;&nbsp;\n    #{haml_temp =  f.label :note_contains, 'Note contains:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :note_contains, :size => 20
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n  </p>\n  <p>\n    #{haml_temp =  f.label :equipment_id_is, 'Equipment:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.collection_select :equipment_id_is, Equipment.all, :id, :name, { :include_blank => true }
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;&nbsp;\n    #{haml_temp =  f.label :client_id_is, 'Client:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.collection_select :client_id_is, Client.all, :id, :name, { :include_blank => true }
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;&nbsp;\n    #{haml_temp =  f.label :technician_id_is, 'Technician:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.collection_select :technician_id_is, Technician.all, :id, :name, { :include_blank => true }
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n  </p>\n</fieldset>\n<p class='button'>\n  #{_hamlout.adjust_tabs(-1); haml_temp =  f.submit 'Filter'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n</p>\n<table>\n  <tr>\n    <th>Admission date</th>\n    <th>External code</th>\n    <th>Last name</th>\n    <th>First name</th>\n    <th>Gross amount</th>\n    <th>Payed amount</th>\n    <th>Discount</th>\n    <th>Payed</th>\n    <th>Payment date</th>\n    <th>Invoice number</th>\n    <th>Notes</th>\n  </tr>\n", 0, false); for invoice_trail in @invoice_trails;


_hamlout.push_text("  <tr>\n    <td>#{_hamlout.adjust_tabs(2); haml_temp = h invoice_trail.admission_date
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.external_code
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.last_name
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.first_name
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.gross_amount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payed_amount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.discount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payed
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payment_date
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.invoice_number
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.notes
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Show', invoice_trail
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Edit', edit_invoice_trail_path(invoice_trail)
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Destroy', invoice_trail, :confirm => 'Are you sure?', :method => :delete
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n  </tr>\n", -1, false);end;_hamlout.push_text("</table>\n<p>#{haml_temp = link_to "New Invoice Trail", new_invoice_trail_path
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</p>\n", 0, false);@haml_buffer = @haml_buffer.upper;_erbout;
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:75:in `compile!'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/renderable.rb:61:in `compile'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/renderable.rb:28:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/template.rb:199:in `render_template'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:260:in `render_without_haml'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:343:in `_render_with_layout'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:257:in `render_without_haml'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1250:in `render_for_file'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:945:in `render_without_benchmark'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:51:in `render'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:51:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1326:in `default_render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1332:in `perform_action_without_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:617:in `call_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/flash.rb:146:in `perform_action'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:532:in `send'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:532:in `process_without_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/sass/plugin/rails.rb:19:in `process'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:391:in `process'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:386:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/routing/route_set.rb:437:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:87:in `dispatch'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:121:in `_call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:29:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:29:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:9:in `cache'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:28:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/head.rb:9:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/methodoverride.rb:24:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/params_parser.rb:15:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/session/cookie_store.rb:93:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/failsafe.rb:26:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `synchronize'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:114:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/reloader.rb:34:in `run'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:108:in `call'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/utils.rb:176:in `safe_fork'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:149:in `start'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/bin/passenger-spawn-server:50

ActionView::TemplateError (compile error
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:73: syntax error, unexpected kENSURE, expecting kEND
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:75: syntax error, unexpected $end, expecting kEND) on line #73 of app/views/invoice_trails/index.html.haml:
70: 
71: %p= link_to "New Invoice Trail", new_invoice_trail_path

    app/views/invoice_trails/index.html.haml:75:in `compile!'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/sass/plugin/rails.rb:19:in `process'
    passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
    passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendered rescues/_trace (35.5ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:41:56) [GET]
  [4;36;1mInvoiceTrail Load (0.1ms)[0m   [0;1mSELECT * FROM "invoice_trails" [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
ERROR: compiling _run_haml_app47views47invoice_trails47index46html46haml RAISED compile error
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:73: syntax error, unexpected kENSURE, expecting kEND
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:75: syntax error, unexpected $end, expecting kEND
Function body:           def _run_haml_app47views47invoice_trails47index46html46haml(local_assigns)
            old_output_buffer = output_buffer;;extend Haml::Helpers;_hamlout = @haml_buffer = Haml::Buffer.new(@haml_buffer, {:attr_wrapper=>"'", :format=>:xhtml, :preserve=>["textarea", "pre"], :autoclose=>["meta", "img", "link", "br", "hr", "input", "area", "param", "col", "base"], :ugly=>false, :encoding=>nil});_erbout = _hamlout.buffer;__in_erb_template = true;; title "Invoice Trails (#{@invoice_trails_count})";

 form_for @search do |f|;
































_hamlout.push_text("<fieldset>\n  <legend>\n    Search Criteria\n    <!-- \n    -->\n    <!-- = f.label :service_type_is,  'Type:' -->\n    <!-- \n    -->\n    <!-- \n    -->\n  </legend>\n  <p>\n    #{_hamlout.adjust_tabs(2); haml_temp =  f.label :full_name_contains, 'Full Name:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :full_name_contains, :size => 30
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;\n    #{haml_temp =  f.label :payed, 'Payment Status:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;\n    #{haml_temp =  f.radio_button :payed, true
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    Payed&nbsp;&nbsp;\n    #{haml_temp =  f.radio_button :payed, false
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    Not Payed&nbsp;&nbsp;\n  </p>\n  <p>\n    #{haml_temp =  f.label :admission_date_after, "Scheduled between:"
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :scheduled_date_at_after, :size => 10, :class => 'date'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.label :scheduled_date_at_before, "and:"
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :scheduled_date_at_before, :size => 10, :class => 'date'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;&nbsp;&nbsp;\n    #{haml_temp =  f.label :note_contains, 'Note contains:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :note_contains, :size => 20
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n  </p>\n  <p>\n    #{haml_temp =  f.label :equipment_id_is, 'Equipment:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.collection_select :equipment_id_is, Equipment.all, :id, :name, { :include_blank => true }
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;&nbsp;\n    #{haml_temp =  f.label :client_id_is, 'Client:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.collection_select :client_id_is, Client.all, :id, :name, { :include_blank => true }
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;&nbsp;\n    #{haml_temp =  f.label :technician_id_is, 'Technician:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.collection_select :technician_id_is, Technician.all, :id, :name, { :include_blank => true }
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n  </p>\n</fieldset>\n<p class='button'>\n  #{_hamlout.adjust_tabs(-1); haml_temp =  f.submit 'Filter'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n</p>\n<table>\n  <tr>\n    <th>Admission date</th>\n    <th>External code</th>\n    <th>Last name</th>\n    <th>First name</th>\n    <th>Gross amount</th>\n    <th>Payed amount</th>\n    <th>Discount</th>\n    <th>Payed</th>\n    <th>Payment date</th>\n    <th>Invoice number</th>\n    <th>Notes</th>\n  </tr>\n", 0, false); for invoice_trail in @invoice_trails;


_hamlout.push_text("  <tr>\n    <td>#{_hamlout.adjust_tabs(2); haml_temp = h invoice_trail.admission_date
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.external_code
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.last_name
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.first_name
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.gross_amount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payed_amount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.discount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payed
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payment_date
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.invoice_number
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.notes
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Show', invoice_trail
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Edit', edit_invoice_trail_path(invoice_trail)
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Destroy', invoice_trail, :confirm => 'Are you sure?', :method => :delete
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n  </tr>\n", -1, false);end;_hamlout.push_text("</table>\n<p>#{haml_temp = link_to "New Invoice Trail", new_invoice_trail_path
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</p>\n", 0, false);@haml_buffer = @haml_buffer.upper;_erbout;
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:75:in `compile!'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/renderable.rb:61:in `compile'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/renderable.rb:28:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/template.rb:199:in `render_template'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:260:in `render_without_haml'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:343:in `_render_with_layout'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:257:in `render_without_haml'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1250:in `render_for_file'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:945:in `render_without_benchmark'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:51:in `render'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:51:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1326:in `default_render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1332:in `perform_action_without_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:617:in `call_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/flash.rb:146:in `perform_action'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:532:in `send'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:532:in `process_without_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/sass/plugin/rails.rb:19:in `process'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:391:in `process'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:386:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/routing/route_set.rb:437:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:87:in `dispatch'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:121:in `_call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:29:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:29:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:9:in `cache'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:28:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/head.rb:9:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/methodoverride.rb:24:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/params_parser.rb:15:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/session/cookie_store.rb:93:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/failsafe.rb:26:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `synchronize'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:114:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/reloader.rb:34:in `run'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:108:in `call'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/utils.rb:176:in `safe_fork'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:149:in `start'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/bin/passenger-spawn-server:50

ActionView::TemplateError (compile error
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:73: syntax error, unexpected kENSURE, expecting kEND
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:75: syntax error, unexpected $end, expecting kEND) on line #73 of app/views/invoice_trails/index.html.haml:
70: 
71: %p= link_to "New Invoice Trail", new_invoice_trail_path

    app/views/invoice_trails/index.html.haml:75:in `compile!'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/sass/plugin/rails.rb:19:in `process'
    passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
    passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendered rescues/_trace (109.1ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:41:57) [GET]
  [4;36;1mInvoiceTrail Load (0.1ms)[0m   [0;1mSELECT * FROM "invoice_trails" [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
ERROR: compiling _run_haml_app47views47invoice_trails47index46html46haml RAISED compile error
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:73: syntax error, unexpected kENSURE, expecting kEND
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:75: syntax error, unexpected $end, expecting kEND
Function body:           def _run_haml_app47views47invoice_trails47index46html46haml(local_assigns)
            old_output_buffer = output_buffer;;extend Haml::Helpers;_hamlout = @haml_buffer = Haml::Buffer.new(@haml_buffer, {:attr_wrapper=>"'", :format=>:xhtml, :preserve=>["textarea", "pre"], :autoclose=>["meta", "img", "link", "br", "hr", "input", "area", "param", "col", "base"], :ugly=>false, :encoding=>nil});_erbout = _hamlout.buffer;__in_erb_template = true;; title "Invoice Trails (#{@invoice_trails_count})";

 form_for @search do |f|;
































_hamlout.push_text("<fieldset>\n  <legend>\n    Search Criteria\n    <!-- \n    -->\n    <!-- = f.label :service_type_is,  'Type:' -->\n    <!-- \n    -->\n    <!-- \n    -->\n  </legend>\n  <p>\n    #{_hamlout.adjust_tabs(2); haml_temp =  f.label :full_name_contains, 'Full Name:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :full_name_contains, :size => 30
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;\n    #{haml_temp =  f.label :payed, 'Payment Status:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;\n    #{haml_temp =  f.radio_button :payed, true
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    Payed&nbsp;&nbsp;\n    #{haml_temp =  f.radio_button :payed, false
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    Not Payed&nbsp;&nbsp;\n  </p>\n  <p>\n    #{haml_temp =  f.label :admission_date_after, "Scheduled between:"
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :scheduled_date_at_after, :size => 10, :class => 'date'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.label :scheduled_date_at_before, "and:"
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :scheduled_date_at_before, :size => 10, :class => 'date'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;&nbsp;&nbsp;\n    #{haml_temp =  f.label :note_contains, 'Note contains:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :note_contains, :size => 20
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n  </p>\n  <p>\n    #{haml_temp =  f.label :equipment_id_is, 'Equipment:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.collection_select :equipment_id_is, Equipment.all, :id, :name, { :include_blank => true }
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;&nbsp;\n    #{haml_temp =  f.label :client_id_is, 'Client:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.collection_select :client_id_is, Client.all, :id, :name, { :include_blank => true }
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;&nbsp;\n    #{haml_temp =  f.label :technician_id_is, 'Technician:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.collection_select :technician_id_is, Technician.all, :id, :name, { :include_blank => true }
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n  </p>\n</fieldset>\n<p class='button'>\n  #{_hamlout.adjust_tabs(-1); haml_temp =  f.submit 'Filter'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n</p>\n<table>\n  <tr>\n    <th>Admission date</th>\n    <th>External code</th>\n    <th>Last name</th>\n    <th>First name</th>\n    <th>Gross amount</th>\n    <th>Payed amount</th>\n    <th>Discount</th>\n    <th>Payed</th>\n    <th>Payment date</th>\n    <th>Invoice number</th>\n    <th>Notes</th>\n  </tr>\n", 0, false); for invoice_trail in @invoice_trails;


_hamlout.push_text("  <tr>\n    <td>#{_hamlout.adjust_tabs(2); haml_temp = h invoice_trail.admission_date
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.external_code
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.last_name
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.first_name
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.gross_amount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payed_amount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.discount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payed
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payment_date
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.invoice_number
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.notes
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Show', invoice_trail
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Edit', edit_invoice_trail_path(invoice_trail)
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Destroy', invoice_trail, :confirm => 'Are you sure?', :method => :delete
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n  </tr>\n", -1, false);end;_hamlout.push_text("</table>\n<p>#{haml_temp = link_to "New Invoice Trail", new_invoice_trail_path
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</p>\n", 0, false);@haml_buffer = @haml_buffer.upper;_erbout;
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:75:in `compile!'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/renderable.rb:61:in `compile'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/renderable.rb:28:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/template.rb:199:in `render_template'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:260:in `render_without_haml'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:343:in `_render_with_layout'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:257:in `render_without_haml'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1250:in `render_for_file'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:945:in `render_without_benchmark'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:51:in `render'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:51:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1326:in `default_render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1332:in `perform_action_without_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:617:in `call_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/flash.rb:146:in `perform_action'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:532:in `send'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:532:in `process_without_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/sass/plugin/rails.rb:19:in `process'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:391:in `process'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:386:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/routing/route_set.rb:437:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:87:in `dispatch'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:121:in `_call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:29:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:29:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:9:in `cache'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:28:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/head.rb:9:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/methodoverride.rb:24:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/params_parser.rb:15:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/session/cookie_store.rb:93:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/failsafe.rb:26:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `synchronize'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:114:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/reloader.rb:34:in `run'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:108:in `call'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/utils.rb:176:in `safe_fork'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:149:in `start'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/bin/passenger-spawn-server:50

ActionView::TemplateError (compile error
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:73: syntax error, unexpected kENSURE, expecting kEND
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:75: syntax error, unexpected $end, expecting kEND) on line #73 of app/views/invoice_trails/index.html.haml:
70: 
71: %p= link_to "New Invoice Trail", new_invoice_trail_path

    app/views/invoice_trails/index.html.haml:75:in `compile!'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/sass/plugin/rails.rb:19:in `process'
    passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
    passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendered rescues/_trace (35.4ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:41:58) [GET]
  [4;36;1mInvoiceTrail Load (0.1ms)[0m   [0;1mSELECT * FROM "invoice_trails" [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
ERROR: compiling _run_haml_app47views47invoice_trails47index46html46haml RAISED compile error
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:73: syntax error, unexpected kENSURE, expecting kEND
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:75: syntax error, unexpected $end, expecting kEND
Function body:           def _run_haml_app47views47invoice_trails47index46html46haml(local_assigns)
            old_output_buffer = output_buffer;;extend Haml::Helpers;_hamlout = @haml_buffer = Haml::Buffer.new(@haml_buffer, {:attr_wrapper=>"'", :format=>:xhtml, :preserve=>["textarea", "pre"], :autoclose=>["meta", "img", "link", "br", "hr", "input", "area", "param", "col", "base"], :ugly=>false, :encoding=>nil});_erbout = _hamlout.buffer;__in_erb_template = true;; title "Invoice Trails (#{@invoice_trails_count})";

 form_for @search do |f|;
































_hamlout.push_text("<fieldset>\n  <legend>\n    Search Criteria\n    <!-- \n    -->\n    <!-- = f.label :service_type_is,  'Type:' -->\n    <!-- \n    -->\n    <!-- \n    -->\n  </legend>\n  <p>\n    #{_hamlout.adjust_tabs(2); haml_temp =  f.label :full_name_contains, 'Full Name:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :full_name_contains, :size => 30
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;\n    #{haml_temp =  f.label :payed, 'Payment Status:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;\n    #{haml_temp =  f.radio_button :payed, true
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    Payed&nbsp;&nbsp;\n    #{haml_temp =  f.radio_button :payed, false
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    Not Payed&nbsp;&nbsp;\n  </p>\n  <p>\n    #{haml_temp =  f.label :admission_date_after, "Scheduled between:"
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :scheduled_date_at_after, :size => 10, :class => 'date'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.label :scheduled_date_at_before, "and:"
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :scheduled_date_at_before, :size => 10, :class => 'date'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;&nbsp;&nbsp;\n    #{haml_temp =  f.label :note_contains, 'Note contains:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :note_contains, :size => 20
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n  </p>\n  <p>\n    #{haml_temp =  f.label :equipment_id_is, 'Equipment:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.collection_select :equipment_id_is, Equipment.all, :id, :name, { :include_blank => true }
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;&nbsp;\n    #{haml_temp =  f.label :client_id_is, 'Client:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.collection_select :client_id_is, Client.all, :id, :name, { :include_blank => true }
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;&nbsp;\n    #{haml_temp =  f.label :technician_id_is, 'Technician:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.collection_select :technician_id_is, Technician.all, :id, :name, { :include_blank => true }
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n  </p>\n</fieldset>\n<p class='button'>\n  #{_hamlout.adjust_tabs(-1); haml_temp =  f.submit 'Filter'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n</p>\n<table>\n  <tr>\n    <th>Admission date</th>\n    <th>External code</th>\n    <th>Last name</th>\n    <th>First name</th>\n    <th>Gross amount</th>\n    <th>Payed amount</th>\n    <th>Discount</th>\n    <th>Payed</th>\n    <th>Payment date</th>\n    <th>Invoice number</th>\n    <th>Notes</th>\n  </tr>\n", 0, false); for invoice_trail in @invoice_trails;


_hamlout.push_text("  <tr>\n    <td>#{_hamlout.adjust_tabs(2); haml_temp = h invoice_trail.admission_date
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.external_code
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.last_name
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.first_name
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.gross_amount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payed_amount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.discount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payed
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payment_date
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.invoice_number
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.notes
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Show', invoice_trail
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Edit', edit_invoice_trail_path(invoice_trail)
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Destroy', invoice_trail, :confirm => 'Are you sure?', :method => :delete
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n  </tr>\n", -1, false);end;_hamlout.push_text("</table>\n<p>#{haml_temp = link_to "New Invoice Trail", new_invoice_trail_path
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</p>\n", 0, false);@haml_buffer = @haml_buffer.upper;_erbout;
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:75:in `compile!'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/renderable.rb:61:in `compile'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/renderable.rb:28:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/template.rb:199:in `render_template'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:260:in `render_without_haml'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:343:in `_render_with_layout'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:257:in `render_without_haml'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1250:in `render_for_file'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:945:in `render_without_benchmark'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:51:in `render'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:51:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1326:in `default_render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1332:in `perform_action_without_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:617:in `call_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/flash.rb:146:in `perform_action'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:532:in `send'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:532:in `process_without_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/sass/plugin/rails.rb:19:in `process'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:391:in `process'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:386:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/routing/route_set.rb:437:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:87:in `dispatch'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:121:in `_call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:29:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:29:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:9:in `cache'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:28:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/head.rb:9:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/methodoverride.rb:24:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/params_parser.rb:15:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/session/cookie_store.rb:93:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/failsafe.rb:26:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `synchronize'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:114:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/reloader.rb:34:in `run'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:108:in `call'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/utils.rb:176:in `safe_fork'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:149:in `start'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/bin/passenger-spawn-server:50

ActionView::TemplateError (compile error
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:73: syntax error, unexpected kENSURE, expecting kEND
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:75: syntax error, unexpected $end, expecting kEND) on line #73 of app/views/invoice_trails/index.html.haml:
70: 
71: %p= link_to "New Invoice Trail", new_invoice_trail_path

    app/views/invoice_trails/index.html.haml:75:in `compile!'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/sass/plugin/rails.rb:19:in `process'
    passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
    passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendered rescues/_trace (109.0ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:43:52) [GET]
  [4;36;1mInvoiceTrail Load (0.1ms)[0m   [0;1mSELECT * FROM "invoice_trails" [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
ERROR: compiling _run_haml_app47views47invoice_trails47index46html46haml RAISED compile error
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:78: syntax error, unexpected kENSURE, expecting kEND
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:80: syntax error, unexpected $end, expecting kEND
Function body:           def _run_haml_app47views47invoice_trails47index46html46haml(local_assigns)
            old_output_buffer = output_buffer;;extend Haml::Helpers;_hamlout = @haml_buffer = Haml::Buffer.new(@haml_buffer, {:attr_wrapper=>"'", :format=>:xhtml, :preserve=>["textarea", "pre"], :autoclose=>["meta", "img", "link", "br", "hr", "input", "area", "param", "col", "base"], :ugly=>false, :encoding=>nil});_erbout = _hamlout.buffer;__in_erb_template = true;; title "Invoice Trails (#{@invoice_trails_count})";

 form_for @search do |f|;



































_hamlout.push_text("<fieldset>\n  <legend>\n    Search Criteria\n    <!-- \n    -->\n    <!-- = f.label :service_type_is,  'Type:' -->\n    <!-- \n    -->\n    <!-- \n    -->\n  </legend>\n  <p>\n    #{_hamlout.adjust_tabs(2); haml_temp =  f.label :full_name_contains, 'Full Name:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :full_name_contains, :size => 30
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;\n    #{haml_temp =  f.label :payed, 'Payment Status:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;\n    #{haml_temp =  f.radio_button :payed, true
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    Payed&nbsp;&nbsp;\n    #{haml_temp =  f.radio_button :payed, false
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    Not Payed&nbsp;&nbsp;\n    #{haml_temp =  f.label :invoice_is_nil, 'Invoice is nil:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;\n    #{haml_temp =  f.check_box :invoice_is_nil, true
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n  </p>\n  <p>\n    #{haml_temp =  f.label :admission_date_after, "Scheduled between:"
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :scheduled_date_at_after, :size => 10, :class => 'date'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.label :scheduled_date_at_before, "and:"
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :scheduled_date_at_before, :size => 10, :class => 'date'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;&nbsp;&nbsp;\n    #{haml_temp =  f.label :note_contains, 'Note contains:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :note_contains, :size => 20
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n  </p>\n  <p>\n    #{haml_temp =  f.label :equipment_id_is, 'Equipment:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.collection_select :equipment_id_is, Equipment.all, :id, :name, { :include_blank => true }
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;&nbsp;\n    #{haml_temp =  f.label :client_id_is, 'Client:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.collection_select :client_id_is, Client.all, :id, :name, { :include_blank => true }
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;&nbsp;\n    #{haml_temp =  f.label :technician_id_is, 'Technician:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.collection_select :technician_id_is, Technician.all, :id, :name, { :include_blank => true }
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n  </p>\n</fieldset>\n<p class='button'>\n  #{_hamlout.adjust_tabs(-1); haml_temp =  f.submit 'Filter'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n</p>\n<table>\n  <tr>\n    <th>Admission date</th>\n    <th>External code</th>\n    <th>Last name</th>\n    <th>First name</th>\n    <th>Gross amount</th>\n    <th>Payed amount</th>\n    <th>Discount</th>\n    <th>Payed</th>\n    <th>Payment date</th>\n    <th>Invoice number</th>\n    <th>Notes</th>\n  </tr>\n", 0, false); for invoice_trail in @invoice_trails;


_hamlout.push_text("  <tr>\n    <td>#{_hamlout.adjust_tabs(2); haml_temp = h invoice_trail.admission_date
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.external_code
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.last_name
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.first_name
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.gross_amount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payed_amount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.discount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payed
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payment_date
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.invoice_number
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.notes
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Show', invoice_trail
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Edit', edit_invoice_trail_path(invoice_trail)
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Destroy', invoice_trail, :confirm => 'Are you sure?', :method => :delete
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n  </tr>\n", -1, false);end;_hamlout.push_text("</table>\n<p>#{haml_temp = link_to "New Invoice Trail", new_invoice_trail_path
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</p>\n", 0, false);@haml_buffer = @haml_buffer.upper;_erbout;
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:80:in `compile!'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/renderable.rb:61:in `compile'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/renderable.rb:28:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/template.rb:199:in `render_template'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:260:in `render_without_haml'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:343:in `_render_with_layout'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:257:in `render_without_haml'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1250:in `render_for_file'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:945:in `render_without_benchmark'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:51:in `render'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:51:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1326:in `default_render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1332:in `perform_action_without_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:617:in `call_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/flash.rb:146:in `perform_action'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:532:in `send'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:532:in `process_without_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/sass/plugin/rails.rb:19:in `process'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:391:in `process'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:386:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/routing/route_set.rb:437:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:87:in `dispatch'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:121:in `_call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:29:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:29:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:9:in `cache'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:28:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/head.rb:9:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/methodoverride.rb:24:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/params_parser.rb:15:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/session/cookie_store.rb:93:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/failsafe.rb:26:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `synchronize'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:114:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/reloader.rb:34:in `run'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:108:in `call'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/utils.rb:176:in `safe_fork'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:149:in `start'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/bin/passenger-spawn-server:50

ActionView::TemplateError (compile error
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:78: syntax error, unexpected kENSURE, expecting kEND
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:80: syntax error, unexpected $end, expecting kEND) on line #78 of app/views/invoice_trails/index.html.haml:
75: 
76: %p= link_to "New Invoice Trail", new_invoice_trail_path

    app/views/invoice_trails/index.html.haml:80:in `compile!'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/sass/plugin/rails.rb:19:in `process'
    passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
    passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendered rescues/_trace (35.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:44:14) [GET]
  [4;36;1mInvoiceTrail Load (0.1ms)[0m   [0;1mSELECT * FROM "invoice_trails" [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
ERROR: compiling _run_haml_app47views47invoice_trails47index46html46haml RAISED compile error
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:78: syntax error, unexpected kENSURE, expecting kEND
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:80: syntax error, unexpected $end, expecting kEND
Function body:           def _run_haml_app47views47invoice_trails47index46html46haml(local_assigns)
            old_output_buffer = output_buffer;;extend Haml::Helpers;_hamlout = @haml_buffer = Haml::Buffer.new(@haml_buffer, {:attr_wrapper=>"'", :format=>:xhtml, :preserve=>["textarea", "pre"], :autoclose=>["meta", "img", "link", "br", "hr", "input", "area", "param", "col", "base"], :ugly=>false, :encoding=>nil});_erbout = _hamlout.buffer;__in_erb_template = true;; title "Invoice Trails (#{@invoice_trails_count})";

 form_for @search do |f|;



































_hamlout.push_text("<fieldset>\n  <legend>\n    Search Criteria\n    <!-- \n    -->\n    <!-- = f.label :service_type_is,  'Type:' -->\n    <!-- \n    -->\n    <!-- \n    -->\n  </legend>\n  <p>\n    #{_hamlout.adjust_tabs(2); haml_temp =  f.label :full_name_contains, 'Full Name:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :full_name_contains, :size => 30
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;\n    #{haml_temp =  f.label :payed, 'Payment Status:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;\n    #{haml_temp =  f.radio_button :payed, true
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    Payed&nbsp;&nbsp;\n    #{haml_temp =  f.radio_button :payed, false
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    Not Payed&nbsp;&nbsp;\n    #{haml_temp =  f.label :invoice_is_nil, 'Invoice is nil:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;\n    #{haml_temp =  f.check_box :invoice_is_nil, true
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n  </p>\n  <p>\n    #{haml_temp =  f.label :admission_date_after, "Scheduled between:"
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :scheduled_date_at_after, :size => 10, :class => 'date'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.label :scheduled_date_at_before, "and:"
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :scheduled_date_at_before, :size => 10, :class => 'date'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;&nbsp;&nbsp;\n    #{haml_temp =  f.label :note_contains, 'Note contains:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :note_contains, :size => 20
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n  </p>\n  <p>\n    #{haml_temp =  f.label :equipment_id_is, 'Equipment:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.collection_select :equipment_id_is, Equipment.all, :id, :name, { :include_blank => true }
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;&nbsp;\n    #{haml_temp =  f.label :client_id_is, 'Client:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.collection_select :client_id_is, Client.all, :id, :name, { :include_blank => true }
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;&nbsp;\n    #{haml_temp =  f.label :technician_id_is, 'Technician:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.collection_select :technician_id_is, Technician.all, :id, :name, { :include_blank => true }
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n  </p>\n  <p class='button'>\n    #{haml_temp =  f.submit 'Filter'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n  </p>\n</fieldset>\n<table>\n  <tr>\n    <th>Admission date</th>\n    <th>External code</th>\n    <th>Last name</th>\n    <th>First name</th>\n    <th>Gross amount</th>\n    <th>Payed amount</th>\n    <th>Discount</th>\n    <th>Payed</th>\n    <th>Payment date</th>\n    <th>Invoice number</th>\n    <th>Notes</th>\n  </tr>\n", -1, false); for invoice_trail in @invoice_trails;


_hamlout.push_text("  <tr>\n    <td>#{_hamlout.adjust_tabs(2); haml_temp = h invoice_trail.admission_date
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.external_code
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.last_name
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.first_name
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.gross_amount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payed_amount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.discount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payed
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payment_date
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.invoice_number
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.notes
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Show', invoice_trail
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Edit', edit_invoice_trail_path(invoice_trail)
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Destroy', invoice_trail, :confirm => 'Are you sure?', :method => :delete
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n  </tr>\n", -1, false);end;_hamlout.push_text("</table>\n<p>#{haml_temp = link_to "New Invoice Trail", new_invoice_trail_path
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</p>\n", 0, false);@haml_buffer = @haml_buffer.upper;_erbout;
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:80:in `compile!'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/renderable.rb:61:in `compile'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/renderable.rb:28:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/template.rb:199:in `render_template'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:260:in `render_without_haml'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:343:in `_render_with_layout'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:257:in `render_without_haml'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1250:in `render_for_file'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:945:in `render_without_benchmark'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:51:in `render'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:51:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1326:in `default_render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1332:in `perform_action_without_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:617:in `call_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/flash.rb:146:in `perform_action'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:532:in `send'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:532:in `process_without_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/sass/plugin/rails.rb:19:in `process'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:391:in `process'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:386:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/routing/route_set.rb:437:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:87:in `dispatch'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:121:in `_call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:29:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:29:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:9:in `cache'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:28:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/head.rb:9:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/methodoverride.rb:24:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/params_parser.rb:15:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/session/cookie_store.rb:93:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/failsafe.rb:26:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `synchronize'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:114:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/reloader.rb:34:in `run'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:108:in `call'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/utils.rb:176:in `safe_fork'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:149:in `start'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/bin/passenger-spawn-server:50

ActionView::TemplateError (compile error
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:78: syntax error, unexpected kENSURE, expecting kEND
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:80: syntax error, unexpected $end, expecting kEND) on line #78 of app/views/invoice_trails/index.html.haml:
75: 
76: %p= link_to "New Invoice Trail", new_invoice_trail_path

    app/views/invoice_trails/index.html.haml:80:in `compile!'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/sass/plugin/rails.rb:19:in `process'
    passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
    passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendered rescues/_trace (108.3ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:44:14) [GET]
  [4;36;1mInvoiceTrail Load (0.3ms)[0m   [0;1mSELECT * FROM "invoice_trails" [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
ERROR: compiling _run_haml_app47views47invoice_trails47index46html46haml RAISED compile error
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:78: syntax error, unexpected kENSURE, expecting kEND
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:80: syntax error, unexpected $end, expecting kEND
Function body:           def _run_haml_app47views47invoice_trails47index46html46haml(local_assigns)
            old_output_buffer = output_buffer;;extend Haml::Helpers;_hamlout = @haml_buffer = Haml::Buffer.new(@haml_buffer, {:attr_wrapper=>"'", :format=>:xhtml, :preserve=>["textarea", "pre"], :autoclose=>["meta", "img", "link", "br", "hr", "input", "area", "param", "col", "base"], :ugly=>false, :encoding=>nil});_erbout = _hamlout.buffer;__in_erb_template = true;; title "Invoice Trails (#{@invoice_trails_count})";

 form_for @search do |f|;



































_hamlout.push_text("<fieldset>\n  <legend>\n    Search Criteria\n    <!-- \n    -->\n    <!-- = f.label :service_type_is,  'Type:' -->\n    <!-- \n    -->\n    <!-- \n    -->\n  </legend>\n  <p>\n    #{_hamlout.adjust_tabs(2); haml_temp =  f.label :full_name_contains, 'Full Name:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :full_name_contains, :size => 30
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;\n    #{haml_temp =  f.label :payed, 'Payment Status:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;\n    #{haml_temp =  f.radio_button :payed, true
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    Payed&nbsp;&nbsp;\n    #{haml_temp =  f.radio_button :payed, false
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    Not Payed&nbsp;&nbsp;\n    #{haml_temp =  f.label :invoice_is_nil, 'Invoice is nil:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;\n    #{haml_temp =  f.check_box :invoice_is_nil, true
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n  </p>\n  <p>\n    #{haml_temp =  f.label :admission_date_after, "Scheduled between:"
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :scheduled_date_at_after, :size => 10, :class => 'date'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.label :scheduled_date_at_before, "and:"
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :scheduled_date_at_before, :size => 10, :class => 'date'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;&nbsp;&nbsp;\n    #{haml_temp =  f.label :note_contains, 'Note contains:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :note_contains, :size => 20
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n  </p>\n  <p>\n    #{haml_temp =  f.label :equipment_id_is, 'Equipment:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.collection_select :equipment_id_is, Equipment.all, :id, :name, { :include_blank => true }
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;&nbsp;\n    #{haml_temp =  f.label :client_id_is, 'Client:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.collection_select :client_id_is, Client.all, :id, :name, { :include_blank => true }
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;&nbsp;\n    #{haml_temp =  f.label :technician_id_is, 'Technician:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.collection_select :technician_id_is, Technician.all, :id, :name, { :include_blank => true }
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n  </p>\n  <p class='button'>\n    #{haml_temp =  f.submit 'Filter'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n  </p>\n</fieldset>\n<table>\n  <tr>\n    <th>Admission date</th>\n    <th>External code</th>\n    <th>Last name</th>\n    <th>First name</th>\n    <th>Gross amount</th>\n    <th>Payed amount</th>\n    <th>Discount</th>\n    <th>Payed</th>\n    <th>Payment date</th>\n    <th>Invoice number</th>\n    <th>Notes</th>\n  </tr>\n", -1, false); for invoice_trail in @invoice_trails;


_hamlout.push_text("  <tr>\n    <td>#{_hamlout.adjust_tabs(2); haml_temp = h invoice_trail.admission_date
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.external_code
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.last_name
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.first_name
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.gross_amount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payed_amount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.discount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payed
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payment_date
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.invoice_number
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.notes
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Show', invoice_trail
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Edit', edit_invoice_trail_path(invoice_trail)
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Destroy', invoice_trail, :confirm => 'Are you sure?', :method => :delete
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n  </tr>\n", -1, false);end;_hamlout.push_text("</table>\n<p>#{haml_temp = link_to "New Invoice Trail", new_invoice_trail_path
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</p>\n", 0, false);@haml_buffer = @haml_buffer.upper;_erbout;
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:80:in `compile!'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/renderable.rb:61:in `compile'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/renderable.rb:28:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/template.rb:199:in `render_template'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:260:in `render_without_haml'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:343:in `_render_with_layout'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:257:in `render_without_haml'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1250:in `render_for_file'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:945:in `render_without_benchmark'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:51:in `render'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:51:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1326:in `default_render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1332:in `perform_action_without_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:617:in `call_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/flash.rb:146:in `perform_action'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:532:in `send'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:532:in `process_without_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/sass/plugin/rails.rb:19:in `process'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:391:in `process'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:386:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/routing/route_set.rb:437:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:87:in `dispatch'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:121:in `_call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:29:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:29:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:9:in `cache'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:28:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/head.rb:9:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/methodoverride.rb:24:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/params_parser.rb:15:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/session/cookie_store.rb:93:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/failsafe.rb:26:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `synchronize'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:114:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/reloader.rb:34:in `run'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:108:in `call'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/utils.rb:176:in `safe_fork'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:149:in `start'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/bin/passenger-spawn-server:50

ActionView::TemplateError (compile error
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:78: syntax error, unexpected kENSURE, expecting kEND
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:80: syntax error, unexpected $end, expecting kEND) on line #78 of app/views/invoice_trails/index.html.haml:
75: 
76: %p= link_to "New Invoice Trail", new_invoice_trail_path

    app/views/invoice_trails/index.html.haml:80:in `compile!'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/sass/plugin/rails.rb:19:in `process'
    passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
    passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendered rescues/_trace (35.8ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:44:15) [GET]
  [4;36;1mInvoiceTrail Load (0.1ms)[0m   [0;1mSELECT * FROM "invoice_trails" [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
ERROR: compiling _run_haml_app47views47invoice_trails47index46html46haml RAISED compile error
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:78: syntax error, unexpected kENSURE, expecting kEND
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:80: syntax error, unexpected $end, expecting kEND
Function body:           def _run_haml_app47views47invoice_trails47index46html46haml(local_assigns)
            old_output_buffer = output_buffer;;extend Haml::Helpers;_hamlout = @haml_buffer = Haml::Buffer.new(@haml_buffer, {:attr_wrapper=>"'", :format=>:xhtml, :preserve=>["textarea", "pre"], :autoclose=>["meta", "img", "link", "br", "hr", "input", "area", "param", "col", "base"], :ugly=>false, :encoding=>nil});_erbout = _hamlout.buffer;__in_erb_template = true;; title "Invoice Trails (#{@invoice_trails_count})";

 form_for @search do |f|;



































_hamlout.push_text("<fieldset>\n  <legend>\n    Search Criteria\n    <!-- \n    -->\n    <!-- = f.label :service_type_is,  'Type:' -->\n    <!-- \n    -->\n    <!-- \n    -->\n  </legend>\n  <p>\n    #{_hamlout.adjust_tabs(2); haml_temp =  f.label :full_name_contains, 'Full Name:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :full_name_contains, :size => 30
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;\n    #{haml_temp =  f.label :payed, 'Payment Status:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;\n    #{haml_temp =  f.radio_button :payed, true
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    Payed&nbsp;&nbsp;\n    #{haml_temp =  f.radio_button :payed, false
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    Not Payed&nbsp;&nbsp;\n    #{haml_temp =  f.label :invoice_is_nil, 'Invoice is nil:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;\n    #{haml_temp =  f.check_box :invoice_is_nil, true
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n  </p>\n  <p>\n    #{haml_temp =  f.label :admission_date_after, "Scheduled between:"
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :scheduled_date_at_after, :size => 10, :class => 'date'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.label :scheduled_date_at_before, "and:"
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :scheduled_date_at_before, :size => 10, :class => 'date'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;&nbsp;&nbsp;\n    #{haml_temp =  f.label :note_contains, 'Note contains:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :note_contains, :size => 20
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n  </p>\n  <p>\n    #{haml_temp =  f.label :equipment_id_is, 'Equipment:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.collection_select :equipment_id_is, Equipment.all, :id, :name, { :include_blank => true }
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;&nbsp;\n    #{haml_temp =  f.label :client_id_is, 'Client:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.collection_select :client_id_is, Client.all, :id, :name, { :include_blank => true }
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;&nbsp;\n    #{haml_temp =  f.label :technician_id_is, 'Technician:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.collection_select :technician_id_is, Technician.all, :id, :name, { :include_blank => true }
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n  </p>\n  <p class='button'>\n    #{haml_temp =  f.submit 'Filter'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n  </p>\n</fieldset>\n<table>\n  <tr>\n    <th>Admission date</th>\n    <th>External code</th>\n    <th>Last name</th>\n    <th>First name</th>\n    <th>Gross amount</th>\n    <th>Payed amount</th>\n    <th>Discount</th>\n    <th>Payed</th>\n    <th>Payment date</th>\n    <th>Invoice number</th>\n    <th>Notes</th>\n  </tr>\n", -1, false); for invoice_trail in @invoice_trails;


_hamlout.push_text("  <tr>\n    <td>#{_hamlout.adjust_tabs(2); haml_temp = h invoice_trail.admission_date
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.external_code
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.last_name
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.first_name
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.gross_amount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payed_amount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.discount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payed
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payment_date
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.invoice_number
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.notes
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Show', invoice_trail
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Edit', edit_invoice_trail_path(invoice_trail)
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Destroy', invoice_trail, :confirm => 'Are you sure?', :method => :delete
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n  </tr>\n", -1, false);end;_hamlout.push_text("</table>\n<p>#{haml_temp = link_to "New Invoice Trail", new_invoice_trail_path
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</p>\n", 0, false);@haml_buffer = @haml_buffer.upper;_erbout;
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:80:in `compile!'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/renderable.rb:61:in `compile'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/renderable.rb:28:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/template.rb:199:in `render_template'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:260:in `render_without_haml'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:343:in `_render_with_layout'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:257:in `render_without_haml'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1250:in `render_for_file'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:945:in `render_without_benchmark'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:51:in `render'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:51:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1326:in `default_render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1332:in `perform_action_without_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:617:in `call_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/flash.rb:146:in `perform_action'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:532:in `send'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:532:in `process_without_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/sass/plugin/rails.rb:19:in `process'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:391:in `process'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:386:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/routing/route_set.rb:437:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:87:in `dispatch'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:121:in `_call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:29:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:29:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:9:in `cache'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:28:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/head.rb:9:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/methodoverride.rb:24:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/params_parser.rb:15:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/session/cookie_store.rb:93:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/failsafe.rb:26:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `synchronize'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:114:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/reloader.rb:34:in `run'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:108:in `call'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/utils.rb:176:in `safe_fork'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:149:in `start'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/bin/passenger-spawn-server:50

ActionView::TemplateError (compile error
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:78: syntax error, unexpected kENSURE, expecting kEND
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:80: syntax error, unexpected $end, expecting kEND) on line #78 of app/views/invoice_trails/index.html.haml:
75: 
76: %p= link_to "New Invoice Trail", new_invoice_trail_path

    app/views/invoice_trails/index.html.haml:80:in `compile!'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/sass/plugin/rails.rb:19:in `process'
    passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
    passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendered rescues/_trace (38.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:44:16) [GET]
  [4;36;1mInvoiceTrail Load (0.2ms)[0m   [0;1mSELECT * FROM "invoice_trails" [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
ERROR: compiling _run_haml_app47views47invoice_trails47index46html46haml RAISED compile error
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:78: syntax error, unexpected kENSURE, expecting kEND
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:80: syntax error, unexpected $end, expecting kEND
Function body:           def _run_haml_app47views47invoice_trails47index46html46haml(local_assigns)
            old_output_buffer = output_buffer;;extend Haml::Helpers;_hamlout = @haml_buffer = Haml::Buffer.new(@haml_buffer, {:attr_wrapper=>"'", :format=>:xhtml, :preserve=>["textarea", "pre"], :autoclose=>["meta", "img", "link", "br", "hr", "input", "area", "param", "col", "base"], :ugly=>false, :encoding=>nil});_erbout = _hamlout.buffer;__in_erb_template = true;; title "Invoice Trails (#{@invoice_trails_count})";

 form_for @search do |f|;



































_hamlout.push_text("<fieldset>\n  <legend>\n    Search Criteria\n    <!-- \n    -->\n    <!-- = f.label :service_type_is,  'Type:' -->\n    <!-- \n    -->\n    <!-- \n    -->\n  </legend>\n  <p>\n    #{_hamlout.adjust_tabs(2); haml_temp =  f.label :full_name_contains, 'Full Name:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :full_name_contains, :size => 30
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;\n    #{haml_temp =  f.label :payed, 'Payment Status:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;\n    #{haml_temp =  f.radio_button :payed, true
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    Payed&nbsp;&nbsp;\n    #{haml_temp =  f.radio_button :payed, false
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    Not Payed&nbsp;&nbsp;\n    #{haml_temp =  f.label :invoice_is_nil, 'Invoice is nil:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;\n    #{haml_temp =  f.check_box :invoice_is_nil, true
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n  </p>\n  <p>\n    #{haml_temp =  f.label :admission_date_after, "Scheduled between:"
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :scheduled_date_at_after, :size => 10, :class => 'date'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.label :scheduled_date_at_before, "and:"
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :scheduled_date_at_before, :size => 10, :class => 'date'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;&nbsp;&nbsp;\n    #{haml_temp =  f.label :note_contains, 'Note contains:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.text_field :note_contains, :size => 20
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n  </p>\n  <p>\n    #{haml_temp =  f.label :equipment_id_is, 'Equipment:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.collection_select :equipment_id_is, Equipment.all, :id, :name, { :include_blank => true }
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;&nbsp;\n    #{haml_temp =  f.label :client_id_is, 'Client:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.collection_select :client_id_is, Client.all, :id, :name, { :include_blank => true }
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    &nbsp;&nbsp;&nbsp;\n    #{haml_temp =  f.label :technician_id_is, 'Technician:'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n    #{haml_temp =  f.collection_select :technician_id_is, Technician.all, :id, :name, { :include_blank => true }
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n  </p>\n  <p class='button'>\n    #{haml_temp =  f.submit 'Filter'
_hamlout.format_script_false_false_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}\n  </p>\n</fieldset>\n<table>\n  <tr>\n    <th>Admission date</th>\n    <th>External code</th>\n    <th>Last name</th>\n    <th>First name</th>\n    <th>Gross amount</th>\n    <th>Payed amount</th>\n    <th>Discount</th>\n    <th>Payed</th>\n    <th>Payment date</th>\n    <th>Invoice number</th>\n    <th>Notes</th>\n  </tr>\n", -1, false); for invoice_trail in @invoice_trails;


_hamlout.push_text("  <tr>\n    <td>#{_hamlout.adjust_tabs(2); haml_temp = h invoice_trail.admission_date
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.external_code
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.last_name
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.first_name
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.gross_amount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payed_amount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.discount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payed
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payment_date
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.invoice_number
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.notes
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Show', invoice_trail
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Edit', edit_invoice_trail_path(invoice_trail)
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Destroy', invoice_trail, :confirm => 'Are you sure?', :method => :delete
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n  </tr>\n", -1, false);end;_hamlout.push_text("</table>\n<p>#{haml_temp = link_to "New Invoice Trail", new_invoice_trail_path
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</p>\n", 0, false);@haml_buffer = @haml_buffer.upper;_erbout;
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:80:in `compile!'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/renderable.rb:61:in `compile'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/renderable.rb:28:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/template.rb:199:in `render_template'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:260:in `render_without_haml'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:343:in `_render_with_layout'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:257:in `render_without_haml'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1250:in `render_for_file'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:945:in `render_without_benchmark'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:51:in `render'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:51:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1326:in `default_render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1332:in `perform_action_without_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:617:in `call_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/flash.rb:146:in `perform_action'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:532:in `send'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:532:in `process_without_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/sass/plugin/rails.rb:19:in `process'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:391:in `process'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:386:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/routing/route_set.rb:437:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:87:in `dispatch'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:121:in `_call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:29:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:29:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:9:in `cache'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:28:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/head.rb:9:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/methodoverride.rb:24:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/params_parser.rb:15:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/session/cookie_store.rb:93:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/failsafe.rb:26:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `synchronize'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:114:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/reloader.rb:34:in `run'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:108:in `call'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/utils.rb:176:in `safe_fork'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:149:in `start'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/bin/passenger-spawn-server:50

ActionView::TemplateError (compile error
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:78: syntax error, unexpected kENSURE, expecting kEND
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:80: syntax error, unexpected $end, expecting kEND) on line #78 of app/views/invoice_trails/index.html.haml:
75: 
76: %p= link_to "New Invoice Trail", new_invoice_trail_path

    app/views/invoice_trails/index.html.haml:80:in `compile!'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/sass/plugin/rails.rb:19:in `process'
    passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
    passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendered rescues/_trace (35.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:44:36) [GET]
  [4;36;1mInvoiceTrail Load (0.1ms)[0m   [0;1mSELECT * FROM "invoice_trails" [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
ERROR: compiling _run_haml_app47views47invoice_trails47index46html46haml RAISED compile error
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:38: syntax error, unexpected kENSURE, expecting kEND
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:40: syntax error, unexpected $end, expecting kEND
Function body:           def _run_haml_app47views47invoice_trails47index46html46haml(local_assigns)
            old_output_buffer = output_buffer;;extend Haml::Helpers;_hamlout = @haml_buffer = Haml::Buffer.new(@haml_buffer, {:attr_wrapper=>"'", :format=>:xhtml, :preserve=>["textarea", "pre"], :autoclose=>["meta", "img", "link", "br", "hr", "input", "area", "param", "col", "base"], :ugly=>false, :encoding=>nil});_erbout = _hamlout.buffer;__in_erb_template = true;; title "Invoice Trails (#{@invoice_trails_count})";

 form_for @search do |f|;















_hamlout.push_text("<table>\n  <tr>\n    <th>Admission date</th>\n    <th>External code</th>\n    <th>Last name</th>\n    <th>First name</th>\n    <th>Gross amount</th>\n    <th>Payed amount</th>\n    <th>Discount</th>\n    <th>Payed</th>\n    <th>Payment date</th>\n    <th>Invoice number</th>\n    <th>Notes</th>\n  </tr>\n", 1, false); for invoice_trail in @invoice_trails;


_hamlout.push_text("  <tr>\n    <td>#{_hamlout.adjust_tabs(2); haml_temp = h invoice_trail.admission_date
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.external_code
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.last_name
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.first_name
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.gross_amount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payed_amount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.discount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payed
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payment_date
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.invoice_number
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.notes
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Show', invoice_trail
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Edit', edit_invoice_trail_path(invoice_trail)
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Destroy', invoice_trail, :confirm => 'Are you sure?', :method => :delete
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n  </tr>\n", -1, false);end;_hamlout.push_text("</table>\n<p>#{haml_temp = link_to "New Invoice Trail", new_invoice_trail_path
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</p>\n", 0, false);@haml_buffer = @haml_buffer.upper;_erbout;
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:40:in `compile!'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/renderable.rb:61:in `compile'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/renderable.rb:28:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/template.rb:199:in `render_template'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:260:in `render_without_haml'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:343:in `_render_with_layout'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:257:in `render_without_haml'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1250:in `render_for_file'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:945:in `render_without_benchmark'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:51:in `render'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:51:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1326:in `default_render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1332:in `perform_action_without_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:617:in `call_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/flash.rb:146:in `perform_action'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:532:in `send'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:532:in `process_without_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/sass/plugin/rails.rb:19:in `process'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:391:in `process'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:386:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/routing/route_set.rb:437:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:87:in `dispatch'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:121:in `_call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:29:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:29:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:9:in `cache'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:28:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/head.rb:9:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/methodoverride.rb:24:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/params_parser.rb:15:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/session/cookie_store.rb:93:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/failsafe.rb:26:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `synchronize'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:114:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/reloader.rb:34:in `run'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:108:in `call'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/utils.rb:176:in `safe_fork'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:149:in `start'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/bin/passenger-spawn-server:50

ActionView::TemplateError (compile error
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:38: syntax error, unexpected kENSURE, expecting kEND
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:40: syntax error, unexpected $end, expecting kEND) on line #38 of app/views/invoice_trails/index.html.haml:
35: 
36: %p= link_to "New Invoice Trail", new_invoice_trail_path

    app/views/invoice_trails/index.html.haml:40:in `compile!'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/sass/plugin/rails.rb:19:in `process'
    passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
    passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendered rescues/_trace (34.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:44:37) [GET]
  [4;36;1mInvoiceTrail Load (0.2ms)[0m   [0;1mSELECT * FROM "invoice_trails" [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
ERROR: compiling _run_haml_app47views47invoice_trails47index46html46haml RAISED compile error
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:38: syntax error, unexpected kENSURE, expecting kEND
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:40: syntax error, unexpected $end, expecting kEND
Function body:           def _run_haml_app47views47invoice_trails47index46html46haml(local_assigns)
            old_output_buffer = output_buffer;;extend Haml::Helpers;_hamlout = @haml_buffer = Haml::Buffer.new(@haml_buffer, {:attr_wrapper=>"'", :format=>:xhtml, :preserve=>["textarea", "pre"], :autoclose=>["meta", "img", "link", "br", "hr", "input", "area", "param", "col", "base"], :ugly=>false, :encoding=>nil});_erbout = _hamlout.buffer;__in_erb_template = true;; title "Invoice Trails (#{@invoice_trails_count})";

 form_for @search do |f|;















_hamlout.push_text("<table>\n  <tr>\n    <th>Admission date</th>\n    <th>External code</th>\n    <th>Last name</th>\n    <th>First name</th>\n    <th>Gross amount</th>\n    <th>Payed amount</th>\n    <th>Discount</th>\n    <th>Payed</th>\n    <th>Payment date</th>\n    <th>Invoice number</th>\n    <th>Notes</th>\n  </tr>\n", 1, false); for invoice_trail in @invoice_trails;


_hamlout.push_text("  <tr>\n    <td>#{_hamlout.adjust_tabs(2); haml_temp = h invoice_trail.admission_date
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.external_code
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.last_name
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.first_name
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.gross_amount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payed_amount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.discount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payed
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payment_date
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.invoice_number
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.notes
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Show', invoice_trail
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Edit', edit_invoice_trail_path(invoice_trail)
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Destroy', invoice_trail, :confirm => 'Are you sure?', :method => :delete
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n  </tr>\n", -1, false);end;_hamlout.push_text("</table>\n<p>#{haml_temp = link_to "New Invoice Trail", new_invoice_trail_path
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</p>\n", 0, false);@haml_buffer = @haml_buffer.upper;_erbout;
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:40:in `compile!'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/renderable.rb:61:in `compile'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/renderable.rb:28:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/template.rb:199:in `render_template'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:260:in `render_without_haml'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:343:in `_render_with_layout'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:257:in `render_without_haml'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1250:in `render_for_file'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:945:in `render_without_benchmark'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:51:in `render'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:51:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1326:in `default_render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1332:in `perform_action_without_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:617:in `call_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/flash.rb:146:in `perform_action'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:532:in `send'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:532:in `process_without_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/sass/plugin/rails.rb:19:in `process'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:391:in `process'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:386:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/routing/route_set.rb:437:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:87:in `dispatch'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:121:in `_call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:29:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:29:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:9:in `cache'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:28:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/head.rb:9:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/methodoverride.rb:24:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/params_parser.rb:15:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/session/cookie_store.rb:93:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/failsafe.rb:26:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `synchronize'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:114:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/reloader.rb:34:in `run'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:108:in `call'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/utils.rb:176:in `safe_fork'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:149:in `start'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/bin/passenger-spawn-server:50

ActionView::TemplateError (compile error
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:38: syntax error, unexpected kENSURE, expecting kEND
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:40: syntax error, unexpected $end, expecting kEND) on line #38 of app/views/invoice_trails/index.html.haml:
35: 
36: %p= link_to "New Invoice Trail", new_invoice_trail_path

    app/views/invoice_trails/index.html.haml:40:in `compile!'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/sass/plugin/rails.rb:19:in `process'
    passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
    passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendered rescues/_trace (36.5ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:44:38) [GET]
  [4;36;1mInvoiceTrail Load (0.1ms)[0m   [0;1mSELECT * FROM "invoice_trails" [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
ERROR: compiling _run_haml_app47views47invoice_trails47index46html46haml RAISED compile error
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:38: syntax error, unexpected kENSURE, expecting kEND
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:40: syntax error, unexpected $end, expecting kEND
Function body:           def _run_haml_app47views47invoice_trails47index46html46haml(local_assigns)
            old_output_buffer = output_buffer;;extend Haml::Helpers;_hamlout = @haml_buffer = Haml::Buffer.new(@haml_buffer, {:attr_wrapper=>"'", :format=>:xhtml, :preserve=>["textarea", "pre"], :autoclose=>["meta", "img", "link", "br", "hr", "input", "area", "param", "col", "base"], :ugly=>false, :encoding=>nil});_erbout = _hamlout.buffer;__in_erb_template = true;; title "Invoice Trails (#{@invoice_trails_count})";

 form_for @search do |f|;















_hamlout.push_text("<table>\n  <tr>\n    <th>Admission date</th>\n    <th>External code</th>\n    <th>Last name</th>\n    <th>First name</th>\n    <th>Gross amount</th>\n    <th>Payed amount</th>\n    <th>Discount</th>\n    <th>Payed</th>\n    <th>Payment date</th>\n    <th>Invoice number</th>\n    <th>Notes</th>\n  </tr>\n", 1, false); for invoice_trail in @invoice_trails;


_hamlout.push_text("  <tr>\n    <td>#{_hamlout.adjust_tabs(2); haml_temp = h invoice_trail.admission_date
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.external_code
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.last_name
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.first_name
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.gross_amount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payed_amount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.discount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payed
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payment_date
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.invoice_number
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.notes
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Show', invoice_trail
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Edit', edit_invoice_trail_path(invoice_trail)
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Destroy', invoice_trail, :confirm => 'Are you sure?', :method => :delete
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n  </tr>\n", -1, false);end;_hamlout.push_text("</table>\n<p>#{haml_temp = link_to "New Invoice Trail", new_invoice_trail_path
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</p>\n", 0, false);@haml_buffer = @haml_buffer.upper;_erbout;
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:40:in `compile!'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/renderable.rb:61:in `compile'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/renderable.rb:28:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/template.rb:199:in `render_template'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:260:in `render_without_haml'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:343:in `_render_with_layout'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:257:in `render_without_haml'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1250:in `render_for_file'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:945:in `render_without_benchmark'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:51:in `render'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:51:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1326:in `default_render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1332:in `perform_action_without_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:617:in `call_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/flash.rb:146:in `perform_action'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:532:in `send'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:532:in `process_without_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/sass/plugin/rails.rb:19:in `process'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:391:in `process'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:386:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/routing/route_set.rb:437:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:87:in `dispatch'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:121:in `_call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:29:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:29:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:9:in `cache'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:28:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/head.rb:9:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/methodoverride.rb:24:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/params_parser.rb:15:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/session/cookie_store.rb:93:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/failsafe.rb:26:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `synchronize'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:114:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/reloader.rb:34:in `run'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:108:in `call'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/utils.rb:176:in `safe_fork'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:149:in `start'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/bin/passenger-spawn-server:50

ActionView::TemplateError (compile error
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:38: syntax error, unexpected kENSURE, expecting kEND
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:40: syntax error, unexpected $end, expecting kEND) on line #38 of app/views/invoice_trails/index.html.haml:
35: 
36: %p= link_to "New Invoice Trail", new_invoice_trail_path

    app/views/invoice_trails/index.html.haml:40:in `compile!'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/sass/plugin/rails.rb:19:in `process'
    passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
    passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendered rescues/_trace (35.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:44:38) [GET]
  [4;36;1mInvoiceTrail Load (0.1ms)[0m   [0;1mSELECT * FROM "invoice_trails" [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
ERROR: compiling _run_haml_app47views47invoice_trails47index46html46haml RAISED compile error
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:38: syntax error, unexpected kENSURE, expecting kEND
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:40: syntax error, unexpected $end, expecting kEND
Function body:           def _run_haml_app47views47invoice_trails47index46html46haml(local_assigns)
            old_output_buffer = output_buffer;;extend Haml::Helpers;_hamlout = @haml_buffer = Haml::Buffer.new(@haml_buffer, {:attr_wrapper=>"'", :format=>:xhtml, :preserve=>["textarea", "pre"], :autoclose=>["meta", "img", "link", "br", "hr", "input", "area", "param", "col", "base"], :ugly=>false, :encoding=>nil});_erbout = _hamlout.buffer;__in_erb_template = true;; title "Invoice Trails (#{@invoice_trails_count})";

 form_for @search do |f|;















_hamlout.push_text("<table>\n  <tr>\n    <th>Admission date</th>\n    <th>External code</th>\n    <th>Last name</th>\n    <th>First name</th>\n    <th>Gross amount</th>\n    <th>Payed amount</th>\n    <th>Discount</th>\n    <th>Payed</th>\n    <th>Payment date</th>\n    <th>Invoice number</th>\n    <th>Notes</th>\n  </tr>\n", 1, false); for invoice_trail in @invoice_trails;


_hamlout.push_text("  <tr>\n    <td>#{_hamlout.adjust_tabs(2); haml_temp = h invoice_trail.admission_date
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.external_code
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.last_name
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.first_name
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.gross_amount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payed_amount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.discount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payed
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payment_date
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.invoice_number
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.notes
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Show', invoice_trail
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Edit', edit_invoice_trail_path(invoice_trail)
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Destroy', invoice_trail, :confirm => 'Are you sure?', :method => :delete
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n  </tr>\n", -1, false);end;_hamlout.push_text("</table>\n<p>#{haml_temp = link_to "New Invoice Trail", new_invoice_trail_path
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</p>\n", 0, false);@haml_buffer = @haml_buffer.upper;_erbout;
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:40:in `compile!'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/renderable.rb:61:in `compile'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/renderable.rb:28:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/template.rb:199:in `render_template'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:260:in `render_without_haml'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:343:in `_render_with_layout'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:257:in `render_without_haml'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1250:in `render_for_file'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:945:in `render_without_benchmark'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:51:in `render'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:51:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1326:in `default_render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1332:in `perform_action_without_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:617:in `call_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/flash.rb:146:in `perform_action'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:532:in `send'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:532:in `process_without_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/sass/plugin/rails.rb:19:in `process'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:391:in `process'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:386:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/routing/route_set.rb:437:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:87:in `dispatch'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:121:in `_call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:29:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:29:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:9:in `cache'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:28:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/head.rb:9:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/methodoverride.rb:24:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/params_parser.rb:15:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/session/cookie_store.rb:93:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/failsafe.rb:26:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `synchronize'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:114:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/reloader.rb:34:in `run'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:108:in `call'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/utils.rb:176:in `safe_fork'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:149:in `start'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/bin/passenger-spawn-server:50

ActionView::TemplateError (compile error
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:38: syntax error, unexpected kENSURE, expecting kEND
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:40: syntax error, unexpected $end, expecting kEND) on line #38 of app/views/invoice_trails/index.html.haml:
35: 
36: %p= link_to "New Invoice Trail", new_invoice_trail_path

    app/views/invoice_trails/index.html.haml:40:in `compile!'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/sass/plugin/rails.rb:19:in `process'
    passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
    passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendered rescues/_trace (37.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:44:39) [GET]
  [4;36;1mInvoiceTrail Load (0.1ms)[0m   [0;1mSELECT * FROM "invoice_trails" [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
ERROR: compiling _run_haml_app47views47invoice_trails47index46html46haml RAISED compile error
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:38: syntax error, unexpected kENSURE, expecting kEND
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:40: syntax error, unexpected $end, expecting kEND
Function body:           def _run_haml_app47views47invoice_trails47index46html46haml(local_assigns)
            old_output_buffer = output_buffer;;extend Haml::Helpers;_hamlout = @haml_buffer = Haml::Buffer.new(@haml_buffer, {:attr_wrapper=>"'", :format=>:xhtml, :preserve=>["textarea", "pre"], :autoclose=>["meta", "img", "link", "br", "hr", "input", "area", "param", "col", "base"], :ugly=>false, :encoding=>nil});_erbout = _hamlout.buffer;__in_erb_template = true;; title "Invoice Trails (#{@invoice_trails_count})";

 form_for @search do |f|;















_hamlout.push_text("<table>\n  <tr>\n    <th>Admission date</th>\n    <th>External code</th>\n    <th>Last name</th>\n    <th>First name</th>\n    <th>Gross amount</th>\n    <th>Payed amount</th>\n    <th>Discount</th>\n    <th>Payed</th>\n    <th>Payment date</th>\n    <th>Invoice number</th>\n    <th>Notes</th>\n  </tr>\n", 1, false); for invoice_trail in @invoice_trails;


_hamlout.push_text("  <tr>\n    <td>#{_hamlout.adjust_tabs(2); haml_temp = h invoice_trail.admission_date
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.external_code
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.last_name
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.first_name
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.gross_amount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payed_amount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.discount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payed
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payment_date
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.invoice_number
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.notes
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Show', invoice_trail
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Edit', edit_invoice_trail_path(invoice_trail)
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Destroy', invoice_trail, :confirm => 'Are you sure?', :method => :delete
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n  </tr>\n", -1, false);end;_hamlout.push_text("</table>\n<p>#{haml_temp = link_to "New Invoice Trail", new_invoice_trail_path
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</p>\n", 0, false);@haml_buffer = @haml_buffer.upper;_erbout;
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:40:in `compile!'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/renderable.rb:61:in `compile'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/renderable.rb:28:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/template.rb:199:in `render_template'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:260:in `render_without_haml'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:343:in `_render_with_layout'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:257:in `render_without_haml'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1250:in `render_for_file'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:945:in `render_without_benchmark'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:51:in `render'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:51:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1326:in `default_render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1332:in `perform_action_without_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:617:in `call_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/flash.rb:146:in `perform_action'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:532:in `send'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:532:in `process_without_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/sass/plugin/rails.rb:19:in `process'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:391:in `process'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:386:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/routing/route_set.rb:437:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:87:in `dispatch'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:121:in `_call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:29:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:29:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:9:in `cache'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:28:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/head.rb:9:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/methodoverride.rb:24:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/params_parser.rb:15:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/session/cookie_store.rb:93:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/failsafe.rb:26:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `synchronize'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:114:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/reloader.rb:34:in `run'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:108:in `call'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/utils.rb:176:in `safe_fork'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:149:in `start'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/bin/passenger-spawn-server:50

ActionView::TemplateError (compile error
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:38: syntax error, unexpected kENSURE, expecting kEND
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:40: syntax error, unexpected $end, expecting kEND) on line #38 of app/views/invoice_trails/index.html.haml:
35: 
36: %p= link_to "New Invoice Trail", new_invoice_trail_path

    app/views/invoice_trails/index.html.haml:40:in `compile!'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/sass/plugin/rails.rb:19:in `process'
    passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
    passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendered rescues/_trace (35.0ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:44:40) [GET]
  [4;36;1mInvoiceTrail Load (0.1ms)[0m   [0;1mSELECT * FROM "invoice_trails" [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
ERROR: compiling _run_haml_app47views47invoice_trails47index46html46haml RAISED compile error
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:38: syntax error, unexpected kENSURE, expecting kEND
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:40: syntax error, unexpected $end, expecting kEND
Function body:           def _run_haml_app47views47invoice_trails47index46html46haml(local_assigns)
            old_output_buffer = output_buffer;;extend Haml::Helpers;_hamlout = @haml_buffer = Haml::Buffer.new(@haml_buffer, {:attr_wrapper=>"'", :format=>:xhtml, :preserve=>["textarea", "pre"], :autoclose=>["meta", "img", "link", "br", "hr", "input", "area", "param", "col", "base"], :ugly=>false, :encoding=>nil});_erbout = _hamlout.buffer;__in_erb_template = true;; title "Invoice Trails (#{@invoice_trails_count})";

 form_for @search do |f|;















_hamlout.push_text("<table>\n  <tr>\n    <th>Admission date</th>\n    <th>External code</th>\n    <th>Last name</th>\n    <th>First name</th>\n    <th>Gross amount</th>\n    <th>Payed amount</th>\n    <th>Discount</th>\n    <th>Payed</th>\n    <th>Payment date</th>\n    <th>Invoice number</th>\n    <th>Notes</th>\n  </tr>\n", 1, false); for invoice_trail in @invoice_trails;


_hamlout.push_text("  <tr>\n    <td>#{_hamlout.adjust_tabs(2); haml_temp = h invoice_trail.admission_date
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.external_code
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.last_name
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.first_name
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.gross_amount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payed_amount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.discount
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payed
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.payment_date
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.invoice_number
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = h invoice_trail.notes
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Show', invoice_trail
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Edit', edit_invoice_trail_path(invoice_trail)
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n    <td>#{_hamlout.adjust_tabs(1); haml_temp = link_to 'Destroy', invoice_trail, :confirm => 'Are you sure?', :method => :delete
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</td>\n  </tr>\n", -1, false);end;_hamlout.push_text("</table>\n<p>#{haml_temp = link_to "New Invoice Trail", new_invoice_trail_path
_hamlout.format_script_false_true_false_false_false_true_false((haml_very_temp = haml_temp; haml_temp = nil; haml_very_temp));}</p>\n", 0, false);@haml_buffer = @haml_buffer.upper;_erbout;
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:40:in `compile!'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/renderable.rb:61:in `compile'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/renderable.rb:28:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/template.rb:199:in `render_template'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:260:in `render_without_haml'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:343:in `_render_with_layout'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_view/base.rb:257:in `render_without_haml'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1250:in `render_for_file'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:945:in `render_without_benchmark'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:51:in `render'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:51:in `render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1326:in `default_render'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:1332:in `perform_action_without_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:617:in `call_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:10:in `realtime'
/Library/Ruby/Gems/1.8/gems/activesupport-2.3.4/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/flash.rb:146:in `perform_action'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:532:in `send'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:532:in `process_without_filters'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/filters.rb:606:in `sass_old_process'
/Library/Ruby/Gems/1.8/gems/haml-2.2.3/lib/sass/plugin/rails.rb:19:in `process'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:391:in `process'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/base.rb:386:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/routing/route_set.rb:437:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:87:in `dispatch'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:121:in `_call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:29:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:29:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:9:in `cache'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/query_cache.rb:28:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-2.3.4/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/head.rb:9:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/methodoverride.rb:24:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/params_parser.rb:15:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/session/cookie_store.rb:93:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/failsafe.rb:26:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `synchronize'
/Library/Ruby/Gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:114:in `call'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/reloader.rb:34:in `run'
/Library/Ruby/Gems/1.8/gems/actionpack-2.3.4/lib/action_controller/dispatcher.rb:108:in `call'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/utils.rb:176:in `safe_fork'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:149:in `start'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `__send__'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
/Library/Ruby/Gems/1.8/gems/passenger-2.1.2/bin/passenger-spawn-server:50

ActionView::TemplateError (compile error
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:38: syntax error, unexpected kENSURE, expecting kEND
/Users/miky/code/convergent/bios_invoice_manager/app/views/invoice_trails/index.html.haml:40: syntax error, unexpected $end, expecting kEND) on line #38 of app/views/invoice_trails/index.html.haml:
35: 
36: %p= link_to "New Invoice Trail", new_invoice_trail_path

    app/views/invoice_trails/index.html.haml:40:in `compile!'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/sass/plugin/rails.rb:19:in `process'
    passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
    passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendered rescues/_trace (110.3ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:44:53) [GET]
  [4;36;1mInvoiceTrail Load (0.1ms)[0m   [0;1mSELECT * FROM "invoice_trails" [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
  [4;36;1mSQL (0.2ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m

ActionView::TemplateError (undefined method `full_name_contains' for #<Class:0x238a0e8>) on line #28 of app/views/invoice_trails/index.html.haml:
25: 
26:     %p
27:       = f.label :admission_date_after, "Scheduled between:"
28:       = f.text_field :scheduled_date_at_after, :size => 10, :class => 'date'
29:       = f.label :scheduled_date_at_before, "and:"
30:       = f.text_field :scheduled_date_at_before, :size => 10, :class => 'date'
31:       \&nbsp;&nbsp;&nbsp;&nbsp;

    app/views/invoice_trails/index.html.haml:28:in `_run_haml_app47views47invoice_trails47index46html46haml'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:163:in `call'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:163:in `form_for'
    haml (2.2.3) lib/haml/helpers.rb:542:in `call'
    haml (2.2.3) lib/haml/helpers.rb:542:in `haml_bind_proc'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:169:in `form_for'
    app/views/invoice_trails/index.html.haml:3:in `_run_haml_app47views47invoice_trails47index46html46haml'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/sass/plugin/rails.rb:19:in `process'
    passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
    passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendered rescues/_trace (50.4ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:44:54) [GET]
  [4;35;1mInvoiceTrail Load (0.1ms)[0m   [0mSELECT * FROM "invoice_trails" [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
  [4;35;1mSQL (0.2ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m

ActionView::TemplateError (undefined method `full_name_contains' for #<Class:0x3c95934>) on line #28 of app/views/invoice_trails/index.html.haml:
25: 
26:     %p
27:       = f.label :admission_date_after, "Scheduled between:"
28:       = f.text_field :scheduled_date_at_after, :size => 10, :class => 'date'
29:       = f.label :scheduled_date_at_before, "and:"
30:       = f.text_field :scheduled_date_at_before, :size => 10, :class => 'date'
31:       \&nbsp;&nbsp;&nbsp;&nbsp;

    app/views/invoice_trails/index.html.haml:28:in `_run_haml_app47views47invoice_trails47index46html46haml'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:163:in `call'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:163:in `form_for'
    haml (2.2.3) lib/haml/helpers.rb:542:in `call'
    haml (2.2.3) lib/haml/helpers.rb:542:in `haml_bind_proc'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:169:in `form_for'
    app/views/invoice_trails/index.html.haml:3:in `_run_haml_app47views47invoice_trails47index46html46haml'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/sass/plugin/rails.rb:19:in `process'
    passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
    passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendered rescues/_trace (49.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:45:16) [GET]
  [4;36;1mInvoiceTrail Load (0.1ms)[0m   [0;1mSELECT * FROM "invoice_trails" [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index

ActionView::TemplateError (undefined method `merge' for true:TrueClass) on line #33 of app/views/invoice_trails/index.html.haml:
30:       = f.text_field :scheduled_date_at_before, :size => 10, :class => 'date'
31:       \&nbsp;&nbsp;&nbsp;&nbsp;
32:       = f.label :note_contains, 'Note contains:'
33:       = f.text_field :note_contains, :size => 20
34:     %p
35:       = f.label :equipment_id_is, 'Equipment:'
36:       = f.collection_select :equipment_id_is, Equipment.all, :id, :name, { :include_blank => true }

    app/views/invoice_trails/index.html.haml:33:in `_run_haml_app47views47invoice_trails47index46html46haml'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:163:in `call'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:163:in `form_for'
    haml (2.2.3) lib/haml/helpers.rb:542:in `call'
    haml (2.2.3) lib/haml/helpers.rb:542:in `haml_bind_proc'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:169:in `form_for'
    app/views/invoice_trails/index.html.haml:3:in `_run_haml_app47views47invoice_trails47index46html46haml'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/sass/plugin/rails.rb:19:in `process'
    passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
    passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendered rescues/_trace (122.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:45:41) [GET]
  [4;36;1mInvoiceTrail Load (0.2ms)[0m   [0;1mSELECT * FROM "invoice_trails" [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index

ActionView::TemplateError (undefined method `merge' for true:TrueClass) on line #33 of app/views/invoice_trails/index.html.haml:
30:       = f.text_field :scheduled_date_at_before, :size => 10, :class => 'date'
31:       \&nbsp;&nbsp;&nbsp;&nbsp;
32:       = f.label :note_contains, 'Note contains:'
33:       = f.text_field :note_contains, :size => 20
34:     %p
35:       = f.label :equipment_id_is, 'Equipment:'
36:       = f.collection_select :equipment_id_is, Equipment.all, :id, :name, { :include_blank => true }

    app/views/invoice_trails/index.html.haml:33:in `_run_haml_app47views47invoice_trails47index46html46haml'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:163:in `call'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:163:in `form_for'
    haml (2.2.3) lib/haml/helpers.rb:542:in `call'
    haml (2.2.3) lib/haml/helpers.rb:542:in `haml_bind_proc'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:169:in `form_for'
    app/views/invoice_trails/index.html.haml:3:in `_run_haml_app47views47invoice_trails47index46html46haml'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/sass/plugin/rails.rb:19:in `process'
    passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
    passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendered rescues/_trace (41.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:45:42) [GET]
  [4;36;1mInvoiceTrail Load (0.1ms)[0m   [0;1mSELECT * FROM "invoice_trails" [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index

ActionView::TemplateError (undefined method `merge' for true:TrueClass) on line #33 of app/views/invoice_trails/index.html.haml:
30:       = f.text_field :scheduled_date_at_before, :size => 10, :class => 'date'
31:       \&nbsp;&nbsp;&nbsp;&nbsp;
32:       = f.label :note_contains, 'Note contains:'
33:       = f.text_field :note_contains, :size => 20
34:     %p
35:       = f.label :equipment_id_is, 'Equipment:'
36:       = f.collection_select :equipment_id_is, Equipment.all, :id, :name, { :include_blank => true }

    app/views/invoice_trails/index.html.haml:33:in `_run_haml_app47views47invoice_trails47index46html46haml'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:163:in `call'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:163:in `form_for'
    haml (2.2.3) lib/haml/helpers.rb:542:in `call'
    haml (2.2.3) lib/haml/helpers.rb:542:in `haml_bind_proc'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:169:in `form_for'
    app/views/invoice_trails/index.html.haml:3:in `_run_haml_app47views47invoice_trails47index46html46haml'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/sass/plugin/rails.rb:19:in `process'
    passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
    passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendered rescues/_trace (41.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:45:43) [GET]
  [4;36;1mInvoiceTrail Load (0.1ms)[0m   [0;1mSELECT * FROM "invoice_trails" [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index

ActionView::TemplateError (undefined method `merge' for true:TrueClass) on line #33 of app/views/invoice_trails/index.html.haml:
30:       = f.text_field :scheduled_date_at_before, :size => 10, :class => 'date'
31:       \&nbsp;&nbsp;&nbsp;&nbsp;
32:       = f.label :note_contains, 'Note contains:'
33:       = f.text_field :note_contains, :size => 20
34:     %p
35:       = f.label :equipment_id_is, 'Equipment:'
36:       = f.collection_select :equipment_id_is, Equipment.all, :id, :name, { :include_blank => true }

    app/views/invoice_trails/index.html.haml:33:in `_run_haml_app47views47invoice_trails47index46html46haml'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:163:in `call'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:163:in `form_for'
    haml (2.2.3) lib/haml/helpers.rb:542:in `call'
    haml (2.2.3) lib/haml/helpers.rb:542:in `haml_bind_proc'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:169:in `form_for'
    app/views/invoice_trails/index.html.haml:3:in `_run_haml_app47views47invoice_trails47index46html46haml'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/sass/plugin/rails.rb:19:in `process'
    passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
    passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendered rescues/_trace (125.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:45:44) [GET]
  [4;36;1mInvoiceTrail Load (0.1ms)[0m   [0;1mSELECT * FROM "invoice_trails" [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index

ActionView::TemplateError (undefined method `merge' for true:TrueClass) on line #33 of app/views/invoice_trails/index.html.haml:
30:       = f.text_field :scheduled_date_at_before, :size => 10, :class => 'date'
31:       \&nbsp;&nbsp;&nbsp;&nbsp;
32:       = f.label :note_contains, 'Note contains:'
33:       = f.text_field :note_contains, :size => 20
34:     %p
35:       = f.label :equipment_id_is, 'Equipment:'
36:       = f.collection_select :equipment_id_is, Equipment.all, :id, :name, { :include_blank => true }

    app/views/invoice_trails/index.html.haml:33:in `_run_haml_app47views47invoice_trails47index46html46haml'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:163:in `call'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:163:in `form_for'
    haml (2.2.3) lib/haml/helpers.rb:542:in `call'
    haml (2.2.3) lib/haml/helpers.rb:542:in `haml_bind_proc'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:169:in `form_for'
    app/views/invoice_trails/index.html.haml:3:in `_run_haml_app47views47invoice_trails47index46html46haml'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/sass/plugin/rails.rb:19:in `process'
    passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
    passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendered rescues/_trace (40.8ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:45:44) [GET]
  [4;36;1mInvoiceTrail Load (0.1ms)[0m   [0;1mSELECT * FROM "invoice_trails" [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index

ActionView::TemplateError (undefined method `merge' for true:TrueClass) on line #33 of app/views/invoice_trails/index.html.haml:
30:       = f.text_field :scheduled_date_at_before, :size => 10, :class => 'date'
31:       \&nbsp;&nbsp;&nbsp;&nbsp;
32:       = f.label :note_contains, 'Note contains:'
33:       = f.text_field :note_contains, :size => 20
34:     %p
35:       = f.label :equipment_id_is, 'Equipment:'
36:       = f.collection_select :equipment_id_is, Equipment.all, :id, :name, { :include_blank => true }

    app/views/invoice_trails/index.html.haml:33:in `_run_haml_app47views47invoice_trails47index46html46haml'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:163:in `call'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:163:in `form_for'
    haml (2.2.3) lib/haml/helpers.rb:542:in `call'
    haml (2.2.3) lib/haml/helpers.rb:542:in `haml_bind_proc'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:169:in `form_for'
    app/views/invoice_trails/index.html.haml:3:in `_run_haml_app47views47invoice_trails47index46html46haml'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/sass/plugin/rails.rb:19:in `process'
    passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
    passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendered rescues/_trace (128.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:45:45) [GET]
  [4;36;1mInvoiceTrail Load (0.1ms)[0m   [0;1mSELECT * FROM "invoice_trails" [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index

ActionView::TemplateError (undefined method `merge' for true:TrueClass) on line #33 of app/views/invoice_trails/index.html.haml:
30:       = f.text_field :scheduled_date_at_before, :size => 10, :class => 'date'
31:       \&nbsp;&nbsp;&nbsp;&nbsp;
32:       = f.label :note_contains, 'Note contains:'
33:       = f.text_field :note_contains, :size => 20
34:     %p
35:       = f.label :equipment_id_is, 'Equipment:'
36:       = f.collection_select :equipment_id_is, Equipment.all, :id, :name, { :include_blank => true }

    app/views/invoice_trails/index.html.haml:33:in `_run_haml_app47views47invoice_trails47index46html46haml'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:163:in `call'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:163:in `form_for'
    haml (2.2.3) lib/haml/helpers.rb:542:in `call'
    haml (2.2.3) lib/haml/helpers.rb:542:in `haml_bind_proc'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:169:in `form_for'
    app/views/invoice_trails/index.html.haml:3:in `_run_haml_app47views47invoice_trails47index46html46haml'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/sass/plugin/rails.rb:19:in `process'
    passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
    passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendered rescues/_trace (44.0ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:46:14) [GET]
  [4;36;1mInvoiceTrail Load (0.2ms)[0m   [0;1mSELECT * FROM "invoice_trails" [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index

ActionView::TemplateError (undefined method `merge' for true:TrueClass) on line #30 of app/views/invoice_trails/index.html.haml:
27:       = f.label :admission_date_after, "Scheduled between:"
28:       = f.text_field :scheduled_date_at_after, :size => 10, :class => 'date'
29:       = f.label :scheduled_date_at_before, "and:"
30:       = f.text_field :scheduled_date_at_before, :size => 10, :class => 'date'
31:       \&nbsp;&nbsp;&nbsp;&nbsp;
32:       = f.label :note_contains, 'Note contains:'
33:       = f.text_field :note_contains, :size => 20

    app/views/invoice_trails/index.html.haml:30:in `_run_haml_app47views47invoice_trails47index46html46haml'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:163:in `call'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:163:in `form_for'
    haml (2.2.3) lib/haml/helpers.rb:542:in `call'
    haml (2.2.3) lib/haml/helpers.rb:542:in `haml_bind_proc'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:169:in `form_for'
    app/views/invoice_trails/index.html.haml:3:in `_run_haml_app47views47invoice_trails47index46html46haml'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/sass/plugin/rails.rb:19:in `process'
    passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
    passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendered rescues/_trace (124.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:46:15) [GET]
  [4;36;1mInvoiceTrail Load (0.1ms)[0m   [0;1mSELECT * FROM "invoice_trails" [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index

ActionView::TemplateError (undefined method `merge' for true:TrueClass) on line #30 of app/views/invoice_trails/index.html.haml:
27:       = f.label :admission_date_after, "Scheduled between:"
28:       = f.text_field :scheduled_date_at_after, :size => 10, :class => 'date'
29:       = f.label :scheduled_date_at_before, "and:"
30:       = f.text_field :scheduled_date_at_before, :size => 10, :class => 'date'
31:       \&nbsp;&nbsp;&nbsp;&nbsp;
32:       = f.label :note_contains, 'Note contains:'
33:       = f.text_field :note_contains, :size => 20

    app/views/invoice_trails/index.html.haml:30:in `_run_haml_app47views47invoice_trails47index46html46haml'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:163:in `call'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:163:in `form_for'
    haml (2.2.3) lib/haml/helpers.rb:542:in `call'
    haml (2.2.3) lib/haml/helpers.rb:542:in `haml_bind_proc'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:169:in `form_for'
    app/views/invoice_trails/index.html.haml:3:in `_run_haml_app47views47invoice_trails47index46html46haml'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/sass/plugin/rails.rb:19:in `process'
    passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
    passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendered rescues/_trace (43.1ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:46:24) [GET]
  [4;36;1mInvoiceTrail Load (0.1ms)[0m   [0;1mSELECT * FROM "invoice_trails" [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
  [4;36;1mSQL (0.3ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m

ActionView::TemplateError (undefined method `scheduled_date_at_after' for #<Class:0x3a6cce8>) on line #32 of app/views/invoice_trails/index.html.haml:
29:       = f.label :scheduled_date_at_before, "and:"
30:       = f.text_field :scheduled_date_at_before, :size => 10, :class => 'date'
31:       \&nbsp;&nbsp;&nbsp;&nbsp;
32:       = f.label :note_contains, 'Note contains:'
33:       = f.text_field :note_contains, :size => 20
34:     
35:   %p.button

    app/views/invoice_trails/index.html.haml:32:in `_run_haml_app47views47invoice_trails47index46html46haml'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:163:in `call'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:163:in `form_for'
    haml (2.2.3) lib/haml/helpers.rb:542:in `call'
    haml (2.2.3) lib/haml/helpers.rb:542:in `haml_bind_proc'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:169:in `form_for'
    app/views/invoice_trails/index.html.haml:3:in `_run_haml_app47views47invoice_trails47index46html46haml'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/sass/plugin/rails.rb:19:in `process'
    passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
    passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendered rescues/_trace (49.4ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:46:25) [GET]
  [4;35;1mInvoiceTrail Load (1.3ms)[0m   [0mSELECT * FROM "invoice_trails" [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
  [4;35;1mSQL (0.2ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m

ActionView::TemplateError (undefined method `scheduled_date_at_after' for #<Class:0x3b19f38>) on line #32 of app/views/invoice_trails/index.html.haml:
29:       = f.label :scheduled_date_at_before, "and:"
30:       = f.text_field :scheduled_date_at_before, :size => 10, :class => 'date'
31:       \&nbsp;&nbsp;&nbsp;&nbsp;
32:       = f.label :note_contains, 'Note contains:'
33:       = f.text_field :note_contains, :size => 20
34:     
35:   %p.button

    app/views/invoice_trails/index.html.haml:32:in `_run_haml_app47views47invoice_trails47index46html46haml'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:163:in `call'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:163:in `form_for'
    haml (2.2.3) lib/haml/helpers.rb:542:in `call'
    haml (2.2.3) lib/haml/helpers.rb:542:in `haml_bind_proc'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:169:in `form_for'
    app/views/invoice_trails/index.html.haml:3:in `_run_haml_app47views47invoice_trails47index46html46haml'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/sass/plugin/rails.rb:19:in `process'
    passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
    passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendered rescues/_trace (132.8ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:46:56) [GET]
  [4;36;1mInvoiceTrail Load (0.1ms)[0m   [0;1mSELECT * FROM "invoice_trails" [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
  [4;36;1mSQL (0.2ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m

ActionView::TemplateError (undefined method `note_contains' for #<Class:0x3bf45c0>) on line #36 of app/views/invoice_trails/index.html.haml:
33:       = f.text_field :note_contains, :size => 20
34:     
35:   %p.button
36:     = f.submit 'Filter'
37: 
38: %table
39:   %tr

    app/views/invoice_trails/index.html.haml:36:in `_run_haml_app47views47invoice_trails47index46html46haml'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:163:in `call'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:163:in `form_for'
    haml (2.2.3) lib/haml/helpers.rb:542:in `call'
    haml (2.2.3) lib/haml/helpers.rb:542:in `haml_bind_proc'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:169:in `form_for'
    app/views/invoice_trails/index.html.haml:3:in `_run_haml_app47views47invoice_trails47index46html46haml'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/haml/helpers/action_view_mods.rb:13:in `render'
    haml (2.2.3) lib/sass/plugin/rails.rb:19:in `process'
    passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
    passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
    passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
    passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
    passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendered rescues/_trace (50.5ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:47:07) [GET]
  [4;35;1mInvoiceTrail Load (0.1ms)[0m   [0mSELECT * FROM "invoice_trails" [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
Completed in 23ms (View: 16, DB: 0) | 200 OK [http://bios-invoice-manager.local/]


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:47:27) [GET]
  [4;35;1mInvoiceTrail Load (0.1ms)[0m   [0mSELECT * FROM "invoice_trails" [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
Completed in 21ms (View: 15, DB: 0) | 200 OK [http://bios-invoice-manager.local/]


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:47:38) [GET]
  [4;35;1mInvoiceTrail Load (0.1ms)[0m   [0mSELECT * FROM "invoice_trails" [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
Completed in 20ms (View: 14, DB: 0) | 200 OK [http://bios-invoice-manager.local/]


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:47:55) [GET]
  [4;35;1mInvoiceTrail Load (0.1ms)[0m   [0mSELECT * FROM "invoice_trails" [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
Completed in 19ms (View: 13, DB: 0) | 200 OK [http://bios-invoice-manager.local/]


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:48:02) [GET]
  [4;35;1mInvoiceTrail Load (0.1ms)[0m   [0mSELECT * FROM "invoice_trails" [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
Completed in 20ms (View: 14, DB: 0) | 200 OK [http://bios-invoice-manager.local/]


Processing InvoiceTrailsController#new (for 127.0.0.1 at 2009-09-07 12:48:10) [GET]
Rendering template within layouts/application
Rendering invoice_trails/new
Rendered invoice_trails/_form (143.1ms)
Completed in 157ms (View: 153, DB: 0) | 200 OK [http://bios-invoice-manager.local/invoice_trails/new]


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:48:56) [GET]
  [4;35;1mInvoiceTrail Load (0.1ms)[0m   [0mSELECT * FROM "invoice_trails" [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
Completed in 20ms (View: 14, DB: 0) | 200 OK [http://bios-invoice-manager.local/]


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:56:31) [GET]
  [4;35;1mInvoiceTrail Load (0.1ms)[0m   [0mSELECT * FROM "invoice_trails" [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
Completed in 22ms (View: 14, DB: 0) | 200 OK [http://bios-invoice-manager.local/]


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:56:55) [GET]
  [4;35;1mInvoiceTrail Load (0.1ms)[0m   [0mSELECT * FROM "invoice_trails" [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
Completed in 20ms (View: 13, DB: 0) | 200 OK [http://bios-invoice-manager.local/]


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:58:02) [GET]
  [4;35;1mInvoiceTrail Load (0.1ms)[0m   [0mSELECT * FROM "invoice_trails" [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
Completed in 19ms (View: 13, DB: 0) | 200 OK [http://bios-invoice-manager.local/]


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:59:35) [GET]
  [4;35;1mInvoiceTrail Load (0.2ms)[0m   [0mSELECT * FROM "invoice_trails" [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
Completed in 21ms (View: 14, DB: 0) | 200 OK [http://bios-invoice-manager.local/]


Processing ApplicationController#index (for 127.0.0.1 at 2009-09-07 12:59:36) [GET]

ActionController::RoutingError (No route matches "/javascripts/default.js" with {:method=>:get}):
  passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
  passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
  passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
  passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
  passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
  passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
  passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
  passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
  passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
  passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
  passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
  passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
  passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
  passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
  passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
  passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
  passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
  passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
  passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
  passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
  passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
  passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendering rescues/layout (not_found)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:59:42) [GET]
  [4;35;1mInvoiceTrail Load (0.2ms)[0m   [0mSELECT * FROM "invoice_trails" [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
Completed in 102ms (View: 96, DB: 0) | 200 OK [http://bios-invoice-manager.local/]


Processing ApplicationController#index (for 127.0.0.1 at 2009-09-07 12:59:43) [GET]

ActionController::RoutingError (No route matches "/javascripts/defaults.js" with {:method=>:get}):
  passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
  passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
  passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
  passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
  passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
  passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
  passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
  passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
  passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
  passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
  passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
  passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
  passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
  passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
  passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
  passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
  passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
  passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
  passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
  passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
  passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
  passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendering rescues/layout (not_found)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:59:43) [GET]
  [4;35;1mInvoiceTrail Load (0.1ms)[0m   [0mSELECT * FROM "invoice_trails" [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
Completed in 12ms (View: 6, DB: 0) | 200 OK [http://bios-invoice-manager.local/]


Processing ApplicationController#index (for 127.0.0.1 at 2009-09-07 12:59:43) [GET]

ActionController::RoutingError (No route matches "/javascripts/defaults.js" with {:method=>:get}):
  passenger (2.1.2) lib/phusion_passenger/rack/request_handler.rb:65:in `process_request'
  passenger (2.1.2) lib/phusion_passenger/abstract_request_handler.rb:197:in `main_loop'
  passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:340:in `start_request_handler'
  passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:298:in `handle_spawn_application'
  passenger (2.1.2) lib/phusion_passenger/utils.rb:176:in `safe_fork'
  passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:296:in `handle_spawn_application'
  passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
  passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
  passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'
  passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:149:in `start'
  passenger (2.1.2) lib/phusion_passenger/railz/application_spawner.rb:192:in `start'
  passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:260:in `spawn_rails_application'
  passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:121:in `lookup_or_add'
  passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:254:in `spawn_rails_application'
  passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:75:in `synchronize'
  passenger (2.1.2) lib/phusion_passenger/abstract_server_collection.rb:74:in `synchronize'
  passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rails_application'
  passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:148:in `spawn_application'
  passenger (2.1.2) lib/phusion_passenger/spawn_manager.rb:285:in `handle_spawn_application'
  passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `__send__'
  passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:332:in `main_loop'
  passenger (2.1.2) lib/phusion_passenger/abstract_server.rb:182:in `start_synchronously'

Rendering rescues/layout (not_found)


Processing InvoiceTrailsController#index (for 127.0.0.1 at 2009-09-07 12:59:51) [GET]
  [4;35;1mInvoiceTrail Load (0.1ms)[0m   [0mSELECT * FROM "invoice_trails" [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT count(*) AS count_all FROM "invoice_trails" [0m
Rendering template within layouts/application
Rendering invoice_trails/index
Completed in 20ms (View: 14, DB: 0) | 200 OK [http://bios-invoice-manager.local/]
